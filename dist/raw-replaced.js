/**
 * @preserve
 * Kontra.js v9.0.0
 */
let t,i,e=()=>{},s={};function h(t,i){s[t]=s[t]||[],s[t].push(i)}function r(t,...i){(s[t]||[]).map((t=>t(...i)))}let a={get:(t,i)=>"_proxy"==i||e};function o(){return i}function n(t){return 180*t/Math.PI}function l(t,i){return Math.atan2(i.y-t.y,i.x-t.x)}class p{constructor(t=0,i=0,e={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i)}set(t){this.x=t.x,this.y=t.y}add(t){return new p(this.x+t.x,this.y+t.y,this)}t(t){return new p(this.x-t.x,this.y-t.y,this)}scale(t){return new p(this.x*t,this.y*t)}normalize(t=this.length()||1){return new p(this.x/t,this.y/t)}i(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}h(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.i(t)/(this.length()*t.length()))}}function c(){return new p(...arguments)}class d{constructor(t){return this.init(t)}init(t={}){this.position=c(),this.o=c(),this.l=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let i=this.o;t&&(i=i.scale(t)),this.position=this.position.add(i),this.p(),this.l--}get dx(){return this.o.x}get dy(){return this.o.y}set dx(t){this.o.x=t}set dy(t){this.o.y=t}u(){return this.l>0}p(){}}class u extends d{init({width:t=0,height:i=0,context:e=o(),m:s=this.g,update:r=this.advance,children:a=[],...n}={}){this.M=[],super.init({width:t,height:i,context:e,...n}),this.k=!0,this.$(),this.v(a),this.T=s,this.L=r,h("init",(()=>{this.context??(this.context=o())}))}update(t){this.L(t),this.children.map((i=>i.update&&i.update(t)))}m(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.T(),this.children.map((t=>t.m&&t.m())),t.restore()}g(){}p(){this.$(),this.children.map((t=>t.p()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this.p()}set y(t){this.position.y=t,this.p()}get width(){return this._}set width(t){this._=t,this.p()}get height(){return this.S}set height(t){this.S=t,this.p()}$(){if(!this.k)return;let{P:t=0,D:i=0}=this.parent||{};this.P=this.x,this.D=this.y,this.B=this.width,this.A=this.height,this.P+=t,this.D+=i}get C(){return{x:this.P,y:this.D,width:this.B,height:this.A}}set children(t){this.removeChild(this.M),this.v(t)}get children(){return this.M}v(...t){t.flat().map((t=>{this.children.push(t),t.parent=this,t.p=t.p||e,t.p()}))}removeChild(...t){t.flat().map((t=>{(function(t,i){let e=t.indexOf(i);if(-1!=e)return t.splice(e,1),!0})(this.children,t)&&(t.parent=null,t.p())}))}}function f(t){let i=t.canvas;t.clearRect(0,0,i.width,i.height)}let x="#8a5",y="#794",m="#b75",g="#dee",w="#abb",b="#f80",M="#000",k="#443",$="#0001",v="#0001",T="#0002",L="#f002",_=t=>document.createElementNS("http://www.w3.org/2000/svg",t),S=(t="div")=>document.createElement(t),P=S();P.style.overflow="hidden",P.style.position="absolute",P.style.width="100vw",P.style.height="100vh",P.style.backgroundColor=x,P.style.display="grid",P.style.placeItems="center",document.body.append(P);let z=S();z.style.position="absolute",z.style.width="100vw",z.style.height="100vh",z.style.background=`repeating-linear-gradient(-55deg,${$} 0 12px,#0000 0 24px)`,z.style.opacity=0,z.style.willChange="opacity",z.style.transition="opacity.3s";let D=S();D.style.position="absolute",D.style.width="100vw",D.style.height="100vh",D.style.background="repeating-linear-gradient(-55deg, currentColor 0 12px,#0000 0 24px)",D.style.color=L,D.style.opacity=0,D.style.willChange="opacity",D.style.transition="opacity.3s",P.append(z,D);let B=_("svg");B.style.position="relative",B.setAttribute("viewBox","0 0 208 112"),B.setAttribute("preserveAspectRatio","xMidYMid slice"),B.style.width="100vw",B.style.height="100vh",B.style.maxHeight="68vw",B.style.maxWidth="200vh",B.style.display="grid",B.style.touchAction="none",P.append(B);let A=_("rect"),C=_("rect");_("rect");let N={N:(()=>{let t=_("rect");t.setAttribute("fill",x),t.setAttribute("width","160.5px"),t.setAttribute("height","80.5px"),t.setAttribute("transform","translate(23.75 15.75)"),B.append(t)})(),W:(()=>{let t=_("g");return B.append(t),t})(),Y:(()=>{let t=_("defs");B.append(t);let i=_("pattern");i.setAttribute("id","grid"),i.setAttribute("width",8),i.setAttribute("height",8),i.setAttribute("patternUnits","userSpaceOnUse"),t.append(i);let e=_("path");e.setAttribute("d","M8 0L0 0 0 8"),e.setAttribute("fill","none"),e.setAttribute("stroke",$),e.setAttribute("stroke-width",1),i.append(e),A.setAttribute("width","160.5px"),A.setAttribute("height","80.5px"),A.setAttribute("transform","translate(23.75 15.75)"),A.setAttribute("fill","url(#grid)"),A.style.opacity=0,A.style.willChange="opacity",A.style.transition="opacity.3s";let s=_("pattern");s.setAttribute("id","gridred"),s.setAttribute("width",8),s.setAttribute("height",8),s.setAttribute("patternUnits","userSpaceOnUse"),t.append(s);let h=_("path");h.setAttribute("d","M8 0L0 0 0 8"),h.setAttribute("fill","none"),h.setAttribute("stroke",L),h.setAttribute("stroke-width",1),s.append(h),C.setAttribute("width","160.5px"),C.setAttribute("height","80.5px"),C.setAttribute("transform","translate(23.75 15.75)"),C.setAttribute("fill","url(#gridred)"),C.style.opacity=0,C.style.willChange="opacity",C.style.transition="opacity.3s",B.append(A,C)})(),q:(()=>{let t=_("g");return t.setAttribute("fill","none"),B.append(t),t})(),baseLayer:(()=>{let t=_("g");return t.id="baseLayer",t.setAttribute("fill",y),B.append(t),t})(),O:(()=>{let t=_("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),t.setAttribute("stroke",y),t.setAttribute("stroke-width",3),B.append(t),t})(),j:(()=>{let t=_("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),t.setAttribute("stroke","#dca"),t.setAttribute("stroke-width",3),B.append(t),t})(),F:(()=>{let t=_("g");return t.setAttribute("opacity",.12),t.setAttribute("transform","translate(.3,.3)"),B.append(t),t})(),Z:(()=>{let t=_("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),t.setAttribute("stroke",M),t.setAttribute("opacity",.2),B.append(t),t})(),U:(()=>{let t=_("g");return t.setAttribute("stroke-linecap","round"),B.append(t),t})(),J:(()=>{let t=_("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),B.append(t),t})(),R:(()=>{let t=_("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),t.setAttribute("stroke",M),t.setAttribute("opacity",.12),t.setAttribute("transform","translate(.5,.5)"),B.append(t),t})(),H:(()=>{let t=_("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),B.append(t),t})(),G:(()=>{let t=_("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","#fff"),B.append(t),t})(),I:(()=>{let t=_("g");return t.setAttribute("stroke-linecap","round"),B.append(t),t})(),K:(()=>{let t=_("rect");return t.setAttribute("width","160.5px"),t.setAttribute("height","80.5px"),t.setAttribute("transform","translate(23.5 15.5)"),t.setAttribute("fill","none"),t.setAttribute("stroke-width",0),t.style.cursor="cell",t.style.pointerEvents="all",B.append(t),t})()},{U:W,F:Y,baseLayer:q,H:O,R:j,q:F,Y:Z,K:Q,j:U,O:J,J:R,I:H,W:G,Z:E,G:I}=N,K=()=>{W.innerHTML="",Y.innerHTML="",q.innerHTML="",O.innerHTML="",j.innerHTML="",F.innerHTML="",U.innerHTML="",J.innerHTML="",R.innerHTML="",H.innerHTML="",G.innerHTML="",E.innerHTML="",I.innerHTML=""},V=t=>4+8*t,X=[],tt=[],it=[],et=[],st=({V:t,X:i})=>{let e=X;tt=[],e.forEach((t=>{e.forEach((i=>{t!=i&&(tt.find((e=>e.tt==i&&e.it==t))||t.et||i.et||(t.st[0].x==i.st[0].x&&t.st[0].y==i.st[0].y?tt.push({tt:t,it:i,st:[t.st[1],t.st[0],i.st[1]]}):t.st[0].x==i.st[1].x&&t.st[0].y==i.st[1].y?tt.push({tt:t,it:i,st:[t.st[1],t.st[0],i.st[0]]}):t.st[1].x==i.st[0].x&&t.st[1].y==i.st[0].y?tt.push({tt:t,it:i,st:[t.st[0],t.st[1],i.st[1]]}):t.st[1].x==i.st[1].x&&t.st[1].y==i.st[1].y&&tt.push({tt:t,it:i,st:[t.st[0],t.st[1],i.st[0]]})))}))}));let s=[];tt.forEach((t=>{let{tt:i,it:e,st:h}=t,r=`M${V(h[0].x)} ${V(h[0].y)}`,a=V(h[0].x+(h[1].x-h[0].x)/2),o=V(h[0].y+(h[1].y-h[0].y)/2),n=`L${a} ${o}`,l=`L${V(h[2].x)} ${V(h[2].y)}`,p=`Q${V(h[1].x)} ${V(h[1].y)} ${V(h[1].x+(h[2].x-h[1].x)/2)} ${V(h[1].y+(h[2].y-h[1].y)/2)}`,c=tt.find((t=>h[0].x==t.st[1].x&&h[0].y==t.st[1].y))?`M${a} ${o}`:`${r}${n}`,d=tt.find((t=>h[2].x==t.st[1].x&&h[2].y==t.st[1].y))?"":l;s.push({tt:i,it:e,d:`${c}${p}${d}`})})),e.forEach((t=>{if(!tt.find((i=>i.tt==t||i.it==t))&&!t.et){let{st:i}=t,e=`${V(i[0].x)} ${V(i[0].y)}`,h=`${V(i[1].x)} ${V(i[1].y)}`;s.push({path:t,d:`M${e}L${h}`,ht:e,rt:h})}})),s.forEach((e=>{var h,r,a,o,n,l,p;if(it.forEach((t=>{let i=e.path&&e.path==t.path,s=e.tt&&e.tt==t.tt,h=e.it&&e.it==t.it;(i||s&&h)&&(e.ot=t.ot,e.nt=t.nt,e.d!=t.d&&(t.d=e.d,e.ot.setAttribute("d",e.d)))})),it.forEach((i=>{s.find((t=>i.d==t.d))||i.path&&(t&&i.path&&i.path.st[0].fixed?setTimeout((()=>{i.ot.remove()}),500):i.ot.remove())})),!e.ot){e.ot=_("path"),e.ot.setAttribute("d",e.d),e.ot.style.transition="all.4s, opacity.2s",((null==(h=e.path)?void 0:h.st[0].lt)||(null==(r=e.path)?void 0:r.st[1].lt)||(null==(a=e.tt)?void 0:a.st[0].lt)||(null==(o=e.tt)?void 0:o.st[1].lt)||(null==(n=e.it)?void 0:n.st[0].lt)||(null==(l=e.it)?void 0:l.st[1].lt))&&(e.ot.style.strokeDasharray="0 3px",e.ot.style.strokeWidth="2px",e.ot.style.stroke="#bbb",e.ot.style.filter=`drop-shadow(.3px .3px ${T})`),U.append(e.ot);let t=e.path&&et.some((t=>t.x==e.path.st[0].x&&t.y==e.path.st[0].y||t.x==e.path.st[1].x&&t.y==e.path.st[1].y)),s=null==(p=e.path)?void 0:p.st[0].fixed;null!=e.path&&t&&!s||(e.ot.setAttribute("stroke-width",0),e.ot.setAttribute("opacity",0),e.ot.style.willChange="stroke-width, opacity",s&&(e.ot.setAttribute("d",`M${e.ht}L${e.ht}`),setTimeout((()=>{e.ot.setAttribute("d",`M${e.ht}L${e.rt}`)}),20)),i||(e.nt=_("path"),e.nt.setAttribute("d",e.d),J.append(e.nt),setTimeout((()=>{var t;null==(t=e.nt)||t.remove(),e.ot.style.willChange=""}),500)),setTimeout((()=>{e.ot.removeAttribute("stroke-width"),e.ot.setAttribute("opacity",1)}),20))}})),it=[...s],et=[]};class ht extends u{constructor(t){let{st:i}=t;super({...t,st:i}),X.push(this)}remove(){it=it.filter((t=>t.path!=this&&t.tt!=this&&t.it!=this||(t.ot.setAttribute("opacity",0),t.ot.setAttribute("stroke-width",0),setTimeout((()=>{t.ot.remove()}),500),!1))),X.splice(X.findIndex((t=>t==this)),1),et.push({x:this.st[0].x,y:this.st[0].y},{x:this.st[1].x,y:this.st[1].y})}}let rt={ct:9},at=(t,i)=>{let e=Q.getBoundingClientRect().width/20;return{x:3+Math.floor(t/e),y:2+Math.floor(i/e)}},ot=(t,i)=>{let e=Q.getBoundingClientRect().width/20;return{x:(3+t)*e,y:(2+i)*e}};class nt extends u{constructor(t){super({...t,width:t.width??1,height:t.height??1}),this.connections=t.connections}remove(){}}let lt=[],pt=({from:t,to:i})=>{let e=lt.find((i=>i.x==t.x&&i.y==t.y)),s=lt.filter((t=>i.find((i=>t.x==i.x&&t.y==i.y))));return((t,i,e)=>{let s=[{node:i,path:[]}],h=[];for(;s.length;){let{node:i,path:r}=s.shift();if(null==i)return!1;if(e.find((t=>i.x==t.x&&i.y==t.y)))return r.concat(i);h.some((t=>t.x==i.x&&t.y==i.y))||(h.push(i),i.dt.forEach((e=>{h.some((t=>t.x==e.x&&t.y==e.y))||s.push({node:t.find((t=>t.x==e.x&&t.y==e.y)),path:r.concat(i)})})))}return null})(lt,e,s)},ct=t=>t.map((t=>({value:t,sort:Math.random()}))).sort(((t,i)=>t.sort-i.sort)).map((({value:t})=>t)),dt=[];class ut extends u{constructor(t){super({...t});let i=2*Math.random()-1,e=2*Math.random()-1;this.ut=this.ft.ut,this.height=1,this.width=1,this.xt=!0,this.yt=0,this.destination=null,this.x=4+8*this.ft.x+i,this.y=4+8*this.ft.y+e,dt.push(this)}gt(){let{x:t}=this,{y:i}=this,e=_("path");e.setAttribute("d","M0 0 0 0"),e.setAttribute("transform",`translate(${t},${i})`),e.setAttribute("stroke",this.ut),R.append(e),this.ot=e;let s=_("path");s.setAttribute("stroke-width",1.2),s.setAttribute("d","M0 0 .3 .3"),s.setAttribute("transform",`translate(${t},${i})`),E.append(s),this.wt=s}m(){if(!this.ot)return;let{x:t}=this,{y:i}=this;this.ot.setAttribute("transform",`translate(${t},${i})`),this.wt.setAttribute("transform",`translate(${t},${i})`)}update(){var t,i;if(this.advance(),(this.xt||this.yt)&&(this.dx*=.9,this.dy*=.9),this.yt&&(this.yt++,2==this.yt&&this.bt.ut==b&&ct(this.bt.children).forEach(((t,i)=>setTimeout((()=>t.Mt.style.fill=b),250*i))),this.yt>80&&this.kt.length>3||this.yt>120&&this.kt.length>2||this.yt>160)){this.bt.ut==b&&ct(this.bt.children).forEach(((t,i)=>setTimeout((()=>t.Mt.style.fill=T),1e3+1e3*i)));let t=pt({from:{x:this.destination.x,y:this.destination.y},to:[{x:this.ft.x,y:this.ft.y}]});(null==t?void 0:t.length)?(this.$t=!0,this.yt=0,this.vt=!0,this.destination=t.at(-1),this.Tt=t,this.kt=[...t]):this.yt=40*Math.random()+40}if(this.vt&&this.destination&&(null==(t=this.Tt)?void 0:t.length)){let t=2*Math.random()-1,i=2*Math.random()-1,e=new c(4+8*this.Tt[0].x+t,4+8*this.Tt[0].y+i),s=2,h=1;if(3>this.kt.length&&(this.dx*=.9,this.dy*=.9),1==this.Tt.length){if(Math.abs(this.x-e.x)<h&&Math.abs(this.y-e.y)<h)return this.$t?(this.$t=!1,this.xt=!0):(this.yt=1,this.bt.Lt-=this.bt._t,this.bt.St.splice(this.bt.St.indexOf(this),1)),void(this.vt=!1)}else if(Math.abs(this.x-e.x)<s&&Math.abs(this.y-e.y)<s)return void this.Tt.shift();for(;this.o.length()>.1;)this.dx*=.98,this.dy*=.98;let r=.006,a=.01,o=this.position.t(e).normalize();this.x<e.x+r&&(this.dx-=o.x*a),this.x>e.x-r&&(this.dx-=o.x*a),this.y<e.y+r&&(this.dy-=o.y*a),this.y>e.y-r&&(this.dy-=o.y*a)}(null==(i=this.Tt)?void 0:i.length)>0&&dt.filter((t=>t!=this&&!t.xt)).forEach((t=>{let i=t.position.h(this.position),e=t.position.h(this.position.add(this.o));if(i>e&&1.5>e){let i=this.position.t(t.position).normalize(),e=(h=Math.PI/2,new c({x:(s=i).x*Math.cos(h)-1*s.y,y:1*s.x-s.y*Math.cos(h)})).scale(.1);this.o.set(((t,i)=>{let e=t.length(),s=t.add(i),h=s.length();return s.scale(e/h)})(this.o,e))}var s,h;let r=t.position.h(this.position.add(this.o));6>e&&this.o.length()>.06&&(i>r?1.5>e?(this.dx*=.86,this.dy*=.86):(this.dx*=.89,this.dy*=.89):(this.dx*=.9,this.dy*=.9))}))}}let ft=[];class xt extends nt{constructor(t){let{x:i,y:e}=t;super(t),this.st=[{x:this.x,y:this.y}],setTimeout((()=>{this.Pt=new ht({st:[{x:i,y:e,fixed:!0},{x:i+this.zt.x,y:e+this.zt.y}]}),st({Dt:[{x:i,y:e,fixed:!0},{x:i+this.zt.x,y:e+this.zt.y}],X:!0})}),1e3),setTimeout((()=>{this.children.push(new ut({x:this.x,y:this.y,ft:this})),this.children.push(new ut({x:this.x,y:this.y,ft:this})),this.children.forEach((t=>t.gt()))}),2e3),ft.push(this),this.gt()}Bt(t,i){this.zt={x:t-this.x,y:i-this.y},it.filter((t=>t.path==this.Pt||t.tt==this.Pt||t.it==this.Pt)).forEach((t=>{t.ot.setAttribute("stroke-width",0),t.ot.setAttribute("opacity",0),setTimeout((()=>{t.ot.remove()}),500)})),this.Pt&&(this.At=this.Pt,this.At.et=!0),this.Pt=new ht({st:[{x:this.x,y:this.y,fixed:!0},{x:t,y:i}]}),st({Dt:[{x:this.x,y:this.y,fixed:!0},{x:t,y:i}],V:!0}),setTimeout((()=>{var t;null==(t=this.At)||t.remove()}),400)}gt(){let t=4+8*this.x,i=4+8*this.y,e=_("circle");e.setAttribute("fill",v),e.setAttribute("r",0),e.setAttribute("stroke","none"),e.setAttribute("transform",`translate(${t},${i})`),e.style.willChange="r, opacity",e.style.opacity=0,e.style.transition="all.4s",q.append(e),setTimeout((()=>{e.setAttribute("r",3),e.style.opacity=1}),100),setTimeout((()=>e.style.willChange=""),600),this.Ct=_("g"),this.Ct.style.transform=`translate(${t}px,${i}px)`,I.append(this.Ct),this.Nt=_("circle"),this.Nt.style.transition="r.4s",this.Nt.style.willChange="r",setTimeout((()=>this.Nt.setAttribute("r",3)),400),setTimeout((()=>this.Nt.style.willChange=""),900),this.Wt=_("path"),this.Wt.setAttribute("d","M0 0 0 0"),this.Wt.setAttribute("stroke-width",6),this.Wt.style.transform=`translate(${t}px,${i}px)`,this.Wt.style.opacity=0,this.Wt.style.willChange="d",this.Wt.style.transition="d.6s",E.append(this.Wt),setTimeout((()=>this.Wt.style.opacity=.8),800),setTimeout((()=>this.Wt.setAttribute("d","M0 0 2 2")),900),setTimeout((()=>this.Wt.style.willChange=""),1600),this.Yt=_("circle"),this.Yt.setAttribute("fill","none"),this.Yt.setAttribute("r",1),this.Yt.setAttribute("stroke-dasharray",6.3),this.Yt.setAttribute("stroke-dashoffset",6.3),this.Yt.setAttribute("stroke",this.ut),this.Yt.style.willChange="stroke-dashoffset",this.Yt.style.transition="stroke-dashoffset .5s",this.Ct.append(this.Nt,this.Yt),setTimeout((()=>this.Yt.setAttribute("stroke-dashoffset",0)),700),setTimeout((()=>this.Yt.style.willChange=""),1300)}qt(){let t=4+8*this.x,i=4+8*this.y;this.Wt.style.transition="transform.2s d.3s",this.Wt.setAttribute("d","M0 0 3 3"),this.Ct.style.transition="transform.2s",this.Ct.style.transform=`translate(${t}px,${i}px)scale(1.1)`}Ot(){let t=4+8*this.x,i=4+8*this.y;this.Wt.style.transition="transform.3s d.4s",this.Wt.setAttribute("d","M0 0 2 2"),this.Wt.style.transform=`translate(${t}px,${i}px)scale(1)`,this.Ct.style.transition="transform.3s",this.Ct.style.transform=`translate(${t}px,${i}px)scale(1)`}}let yt=()=>{let t=_("svg");t.setAttribute("viewBox","0 0 16 16"),t.setAttribute("stroke-linecap","round");let i=_("path");i.setAttribute("fill",m),i.setAttribute("d","M15 2h-4c-1 0-5 0-6 2l-2 5c-1 2 0 5 2 5h4 l2 2z");let e=_("path");e.setAttribute("fill",g),e.setAttribute("d","M12 3c-2 2-5-1-7-1s-3-.5-3-1c0-.5 2-1 4-1s8 1 6 3z");let s=_("circle");return s.setAttribute("cx",8),s.setAttribute("cy",6),s.setAttribute("r",1),s.setAttribute("fill",k),t.append(i,e,s),t},mt=()=>{let t=_("svg");t.setAttribute("viewBox","0 0 20 20"),t.setAttribute("stroke-linecap","round"),t.style.width="48px",t.style.height="48px";let i=_("path");i.setAttribute("fill",w),i.setAttribute("d","M18 12c-2-3-4-8-7-8-4 0-10 5-10 9 0 3 6 3 8 3l2 4z");let e=_("path");e.setAttribute("fill","#bcc"),e.setAttribute("d","M7.4 7.5c-1-4 3.7-6 8-4 1 .4 1 1.3 0 1-3-1-6 1-4 4 1.1 1.7-3.2 2-4-1z");let s=_("path");s.setAttribute("fill","#cdd"),s.setAttribute("d","M6 5.8c-1-4 3.7-6 8-4 1 .4 1 1.3 0 1-3-1-6 1-4 4 1.1 1.6-3.2 2-4-1z");let h=_("path");h.setAttribute("fill","#cdd"),h.setAttribute("d","M6 15c0 4-2 5-2 4 0-2-1 0-1-1v-3z");let r=_("circle");return r.setAttribute("cx",7),r.setAttribute("cy",9.3),r.setAttribute("r",1),r.setAttribute("fill",k),t.append(e,s,h,i,r),t},gt=()=>{let t=_("svg");t.setAttribute("viewBox","0 0 20 20"),t.setAttribute("stroke-linecap","round");let i=_("path");i.setAttribute("fill",b),i.setAttribute("d","m17 11 1-4c1-4-5 0-5 4s6 8 5 4zM4 6.5c0-2 2-4 2-4 4 0 7 4 8 8m-11 4c4 2 14 6 6-2");let e=_("path");e.setAttribute("fill",b),e.setAttribute("d","m0 11c0 10 16 4 16 0s-16-12-16 0");let s=_("circle");return s.setAttribute("cx",4),s.setAttribute("cy",9),s.setAttribute("r",1),s.setAttribute("fill",k),t.append(e,i,s),t},wt=S(),bt=S(),Mt=S(),kt=S(),$t=S(),vt=S(),Tt=S(),Lt=S(),_t=S(),St=S(),Pt=S(),zt=S("button"),Dt=_("path"),Bt=_("path"),At=(t,i)=>{X.filter((e=>(e.st[0].x==t&&e.st[0].y==i||e.st[1].x==t&&e.st[1].y==i)&&!e.st[0].fixed&&!e.st[1].fixed)).forEach((t=>{99>rt.ct&&(rt.ct++,Pt.innerText=rt.ct),t.remove()})),st({Dt:[{x:t,y:i}]})};function Ct(t,i,e){let s=(i.y-t.y)*(e.x-i.x)-(i.x-t.x)*(e.y-i.y);return 0==s?0:s>0?1:2}let Nt=[],Wt=(t,i)=>{let e=[];for(let s=-i/2+.5;i/2-.5>=s;s++)for(let i=-t/2+.5;t/2-.5>=i;i++)t/2-Math.abs(i)+2*Math.random()-1>Math.abs(s)&&e.push({x:Math.floor(i),y:Math.floor(s)});return e.length>2?e:Wt(t,i)},Yt=({width:t,height:i,x:e,y:s})=>{let h=Wt(t,i),r=[];h=h.map((h=>({x:e+h.x+Math.floor(t/2),y:s+h.y+Math.floor(i/2)})));for(let c=0;i>c;c++)for(let i=0;t>i;i++)r.push({x:e+i,y:s+c});Nt.push({width:t,height:i,x:e,y:s,st:h,jt:r});let a=(t=>{let i=0;for(let h=1;h<t.length;h++)(t[h].y<t[i].y||t[h].y==t[i].y&&t[h].x<t[i].x)&&(i=h);let e=[],s=i;do{e.push(t[s]);let i=(s+1)%t.length;for(let e=0;e<t.length;e++)2==Ct(t[s],t[e],t[i])&&(i=e);s=i}while(s!=i);s=i;do{let h=(s-1+t.length)%t.length;for(let i=0;i<t.length;i++)2==Ct(t[s],t[i],t[h])&&(h=i);s=h,s!=i&&e.push(t[s])}while(s!=i);return e})(h),o=_("path");o.setAttribute("fill","#69b");let n=a.reduce(((t,i,e)=>{let s=a.at((e+1)%a.length),h=i.x+(s.x-i.x)/2,r=i.y+(s.y-i.y)/2;return`${t} ${4+8*i.x} ${4+8*i.y} ${4+8*h} ${4+8*r}`}),`M${4+8*(a[0].x+(a.at(-1).x-a[0].x)/2)} ${4+8*(a[0].y+(a.at(-1).y-a[0].y)/2)}Q`);o.setAttribute("d",n+"Z"),o.setAttribute("stroke-width",4),o.setAttribute("stroke-linejoin","round"),o.setAttribute("stroke","#6ab");let l=_("path");l.setAttribute("fill","#7bc"),l.setAttribute("d",n+"Z"),l.setAttribute("stroke","#7bc"),l.style.filter="blur(2px)";let p=_("path");p.setAttribute("d",n+"Z"),p.setAttribute("stroke-width",6),p.setAttribute("stroke","#9b6"),G.append(p,o,l)},qt={},Ot=!1,jt=(t,i)=>ft.find((e=>e.x==t&&e.y==i)),Ft=(t,i)=>Nt.find((e=>e.st.find((e=>e.x==t&&e.y==i)))),Zt=(t,i)=>X.find((e=>e.st[1].x==t&&e.st[1].y==i&&e.st[1].lt)),Qt=(t,i,e,s)=>X.find((h=>h.st[0].x==t&&h.st[0].y==i&&h.st[1].x==e&&h.st[1].y==s||h.st[1].x==t&&h.st[1].y==i&&h.st[0].x==e&&h.st[0].y==s)),Ut=t=>4+8*t,Jt=_("g"),Rt=_("path");Rt.style.opacity=0,Rt.style.scale=0,Rt.style.transition="all.2s, scale.4s cubic-bezier(.5,2,.5,1)",Jt.append(Rt),J.append(Jt);let Ht=[],Gt=t=>3+Math.random()*(8*t-6);class Et extends u{constructor(t){var i,e;super({...t,anchor:{x:.5,y:.5},x:Gt((null==(i=t.ft)?void 0:i.width)??0),y:Gt((null==(e=t.ft)?void 0:e.height)??0),rotation:t.rotation??Math.random()*Math.PI*4-2*Math.PI});let s=8*this.ft.x+this.x,h=8*this.ft.y+this.y;this.Ft=t.Ft??!1,this.Zt=t.Zt,this.Qt=!1,this.Ut=null,this.Jt=_("g"),this.Jt.style.opacity=0,this.Jt.style.willChange="opacity, transform",this.Jt.style.transition="all.8s cubic-bezier(.5,2,.5,1)",this.Jt.style.transformOrigin="bottom",this.Jt.style.transformBox="fill-box",this.Jt.style.transform=`translate(${s}px,${h-this.height/2}px)`,H.append(this.Jt);let r=_("path");r.setAttribute("fill","#fff"),r.setAttribute("d","m6 6-2-2a3 3 0 1 1 4 0Z"),r.setAttribute("transform","scale(.5) translate(-6 -8)"),this.Jt.append(r),this.Rt=_("path"),this.Rt.setAttribute("stroke",this.color),this.Rt.setAttribute("d","M3 6L3 6M3 4.5L3 3"),this.Rt.setAttribute("transform","scale(.5) translate(-3 -10.4)"),this.Rt.style.opacity=0,this.Jt.append(this.Rt),this.Ht=_("path"),this.Ht.setAttribute("fill",this.color),this.Ht.setAttribute("d","M6 6L4 4A1 1 0 1 1 6 2 1 1 0 1 1 8 4Z"),this.Ht.setAttribute("transform","scale(.3) translate(-6 -13)"),this.Ht.style.opacity=0,this.Jt.append(this.Ht),Ht.push(this)}m(){let t=8*this.ft.x+this.x,i=8*this.ft.y+this.y;this.Jt.style.transform=`translate(${t}px,${i-this.height/2}px)scale(${this.Qt||this.Gt?1:0})`}Et(){return{x:Gt(this.ft.width),y:Gt(this.ft.height)}}It(){this.Gt=!0,this.Jt.style.opacity=1,this.Rt.style.opacity=0,this.Ht.style.opacity=1}Kt(){this.Gt=!1,this.Jt.style.opacity=this.Qt?1:0,this.Rt.style.opacity=this.Qt?1:0,this.Ht.style.opacity=0}Vt(){this.Qt=!0,this.Rt.style.opacity=1,this.Ht.style.opacity=0,this.Jt.style.opacity=1}Xt(){this.Qt=!1,this.Ht.style.opacity=this.Gt?1:0,this.Jt.style.opacity=this.Gt?1:0,this.Rt.style.opacity=0}ti(t){t?this.Vt():this.Xt()}}let It=[];class Kt extends Et{constructor(t){super({...t,ft:t.ft,width:1.5,height:2.5,Zt:.6,color:m,Ft:!!t.Ft&&5e3}),It.push(this)}gt(){this.scale=0;let t=_("g");t.style.transformOrigin="center",t.style.transformBox="fill-box",t.style.transition="all 1s",t.style.willChange="transform",this.ot=t,W.append(t);let i=_("rect");i.setAttribute("fill",m),i.setAttribute("width",this.width),i.setAttribute("height",this.height),i.setAttribute("rx",this.Zt),t.append(i);let e=_("path");e.setAttribute("fill","none"),e.setAttribute("stroke",g),e.setAttribute("width",this.width),e.setAttribute("height",this.height),e.setAttribute("d","M0 2Q0 1 1 1 Q2 1 2 2"),e.setAttribute("transform","translate(-0.2 .6)"),e.setAttribute("stroke-width",.4),this.Ft&&(e.style.transition="all 1s",e.style.willChange="opacity",e.style.opacity=0),this.ii=e,t.append(e);let s=_("rect");s.setAttribute("width",this.width),s.setAttribute("height",this.height),s.setAttribute("rx",this.Zt),s.style.transformOrigin="center",s.style.transformBox="fill-box",s.style.transition="all 1s",s.style.willChange="transform",this.ei=s,Y.append(s),this.m(),wt.style.width="96px",wt.style.opacity="1",setTimeout((()=>{this.scale=1,bt.innerText=It.length}),500),setTimeout((()=>{t.style.transition="",t.style.willChange="",s.style.willChange="",s.style.transition=""}),1500)}update(t){if(this.advance(),t&&(1==this.Ft&&(this.ii.style.opacity=1),this.Ft&&this.Ft--),Math.random()>.99&&(this.target=this.Et()),this.target){let t=l(this,this.target)-this.rotation,i=c(this.target),e=i.h(this)>1;if(Math.abs(t%(2*Math.PI))>.1)this.rotation+=t>0?.04:-.04;else if(e>.1){let t=i.t(this).normalize(),e=this.x+.05*t.x,s=this.y+.05*t.y;this.ft.children.some((t=>{if(this==t)return!1;let i=c(t),h=i.h({x:this.x,y:this.y}),r=i.h({x:e,y:s});return 4>r&&h>r}))||(this.x=e,this.y=s)}}}m(){super.m();let t=8*this.ft.x+this.x-this.width/2,i=8*this.ft.y+this.y-this.height/2;this.ot.style.transform=`translate(${t}px,${i}px)rotate(${n(this.rotation)-90}deg)scale(${this.scale*(this.Ft?.5:1)})`,this.ei.style.transform=`translate(${t}px,${i}px)rotate(${n(this.rotation)-90}deg)scale(${(this.scale+.04)*(this.Ft?.5:1)})`}}let Vt=[];class Xt extends nt{constructor(t){let{si:i}=t;super(t),this.delay=this.delay??0,this.Lt=0,this.hi=0,this.ri=16*this.width+16*this.height,this.ai=0,this.St=[],this.st=[];for(let e=0;e<this.width;e++)for(let t=0;t<this.height;t++)this.st.push({x:this.x+e,y:this.y+t});setTimeout((()=>{this.Pt=new ht({st:[{x:this.x+i[0].x,y:this.y+i[0].y,fixed:i[0].fixed,lt:i[0].lt},{x:this.x+i[1].x,y:this.y+i[1].y,fixed:i[1].fixed,lt:i[1].lt}]}),st({})}),1500+t.delay),Vt.push(this),setTimeout((()=>{this.gt()}),t.delay)}oi(t){this.v(t),t.gt()}ni(){let t=this.children.filter((t=>!t.Ft)),i=t.filter((t=>!t.Qt)),e=t.filter((t=>t.Qt));this.Qt?this.ai>t.length?this.children.forEach((t=>t.Xt())):this.Xt():(this.ti(this.ai>t.length),e.length&&this.ai<e.length&&e[Math.floor(Math.random()*e.length)].Xt(),i.length&&this.ai>t.length-i.length&&i[Math.floor(Math.random()*i.length)].Vt())}update(t,i){if(!this.li){t&&(this.ai=Math.floor(this.Lt/this._t),this.Lt+=this.children.length-1+i/1e5,this.Qt&&this.pi(),this.ni()),this.children.forEach((i=>i.update(t)));for(let t=0;t<this.ai;t++){if(this.St.length>=this.ai)return;let t=dt.filter((t=>t.xt&&t.ut==this.ut));if(0==t.length)return;let i=t[0],e=null;for(let s=0;s<t.length;s++){let h=pt({from:{x:t[s].ft.x,y:t[s].ft.y},to:this.st});(!e||h&&h.length<e.length)&&(e=h,i=t[s])}e&&(i.destination=e.at(-1),i.vt=!0,i.Tt=e,i.kt=[...e],i.xt=!1,this.St.push(i),i.bt=this)}}}m(){this.children.forEach((t=>t.m()))}gt(){let t=.75+8*this.x,i=.75+8*this.y,e=8*this.width-1-.5,s=8*this.height-1-.5;if(this.ut!=b){let h=_("rect");h.style.width=e,h.style.height=s,h.setAttribute("rx",2),h.setAttribute("transform",`translate(${t},${i})`),h.style.opacity=0,h.style.transition="opacity.8s",h.style.willChange="opacity",h.setAttribute("fill",x),F.append(h),setTimeout((()=>h.style.opacity=1),1e3),setTimeout((()=>h.style.willChange=""),2e3)}let h=_("rect");h.setAttribute("width",e),h.setAttribute("height",s),h.setAttribute("rx",2),h.setAttribute("transform",`translate(${t},${i})`),h.setAttribute("stroke",this.ci),h.setAttribute("stroke-dasharray",this.ri),h.setAttribute("stroke-dashoffset",this.ri),h.style.transition="all 1s",O.append(h);let r=_("rect");r.setAttribute("width",e),r.setAttribute("height",s),r.setAttribute("rx",2),r.style.transform=`translate(${t-.5}px,${i-.5}px)`,r.style.willChange="stroke-dashoffset, transform",r.setAttribute("stroke-dasharray",this.ri),r.setAttribute("stroke-dashoffset",this.ri),r.style.transition="stroke-dashoffset 1s,transform.5s",j.append(r),setTimeout((()=>{h.setAttribute("stroke-dashoffset",0),r.setAttribute("stroke-dashoffset",0)}),100),setTimeout((()=>{r.style.transform=`translate(${t}px,${i}px)`}),1e3),this.Jt=_("g"),this.Jt.translate=`${t+e/2}px,${i+s/2+1.5}px`,this.Jt.style.willChange="opacity, transform",this.Jt.style.transition="all.8s cubic-bezier(.5,2,.5,1)",this.Jt.style.transformOrigin="bottom",this.Jt.style.transformBox="fill-box",this.Jt.style.opacity=0,this.Jt.style.transform=`translate(${this.Jt.translate})scale(0)`,H.append(this.Jt),this.di=_("path"),this.di.setAttribute("fill","#fff"),this.di.setAttribute("d","m6 6-2-2a3 3 0 1 1 4 0Z"),this.di.setAttribute("transform","translate(-9 -9) scale(1.5)"),this.Jt.append(this.di),this.ui=_("circle"),this.ui.setAttribute("fill","none"),this.ui.setAttribute("stroke-width","2"),this.ui.setAttribute("stroke-linecap","square"),this.ui.setAttribute("r",2),this.ui.setAttribute("stroke",k),this.ui.setAttribute("opacity",.2),this.ui.setAttribute("transform","scale(1.2) translate(0 -5.3)"),this.Jt.append(this.ui),this.fi=_("circle"),this.fi.setAttribute("fill","none"),this.fi.setAttribute("stroke-width","2"),this.fi.setAttribute("stroke-linecap","butt"),this.fi.setAttribute("r",2),this.fi.setAttribute("stroke","#e31"),this.fi.style.willChange="stroke-dashoffset",this.fi.style.transition="stroke-dashoffset.5s",this.fi.setAttribute("stroke-dasharray",12.56),this.fi.setAttribute("stroke-dashoffset",12.56),this.fi.style.transition="stroke-dashoffset.3s.1s",this.fi.setAttribute("transform","scale(1.2) translate(0 -5.3) rotate(-90)"),this.Jt.append(this.fi),this.Jt.style.opacity=1}Vt(){this.Qt=!0,this.Jt.style.opacity=1,this.fi.style.transition="stroke-dashoffset.4s.8s",this.Jt.style.transform=`translate(${this.Jt.translate})scale(1)`,this.Jt.style.transition="all.8s cubic-bezier(.5,2,.5,1)",setTimeout((()=>{this.fi.style.transition="stroke-dashoffset.4s"}),1e3)}Xt(){this.Qt=!1,this.Jt.style.opacity=0,this.fi.style.transition="stroke-dashoffset.3s",this.Jt.style.transform=`translate(${this.Jt.translate})scale(0)`,this.Jt.style.transition="all.8s cubic-bezier(.5,2,.5,1) .4s"}ti(t){t?this.Vt():this.Xt()}pi(){let t=this.children.filter((t=>!t.Ft)),i=2*t.length,e=this.ai-t.length,s=12.56-12.56/i*e;this.fi.setAttribute("stroke-dashoffset",s),this.xi<e&&(this.Jt.style.transform=`translate(${this.Jt.translate})scale(1.2)`,setTimeout((()=>{this.Jt.style.transform=`translate(${this.Jt.translate})scale(1)`}),200)),this.xi=e,e==i&&(this.u=!1)}}let ti=[];class ii extends Xt{constructor(t){super({...t,ci:m}),this._t=225,this.ut=m,ti.push(this),setTimeout((()=>this.oi({})),2e3+t.delay),setTimeout((()=>this.oi({})),3e3+t.delay),setTimeout((()=>this.oi({Ft:(ti.length-1)%2})),4e3+t.delay),this.li=!0,setTimeout((()=>this.li=!1),3e3)}yi(){if(this.children.length>=5)return!1;for(let t=0;t<this.children.filter((t=>!t.Ft)).length;t++)setTimeout((()=>this.children.filter((t=>!t.Ft))[t].It()),1e3*t),setTimeout((()=>this.children.filter((t=>!t.Ft))[t].Kt()),7e3),t&&setTimeout((()=>this.oi({Ft:!0})),1e3*t+7e3);return!0}oi({Ft:t=!1}){super.oi(new Kt({ft:this,Ft:t}))}update(t,i){super.update(t,i)}}let ei=[];class si extends Et{constructor(t){super({...t,ft:t.ft,width:1,height:1.5,Zt:.6,color:w,Ft:!!t.Ft&&4e3}),ei.push(this)}gt(){this.scale=0;let t=_("g");t.style.transformOrigin="center",t.style.transformBox="fill-box",t.style.transition="all 1s",t.style.willChange="transform",this.ot=t,W.append(t);let i=_("rect");i.setAttribute("fill",w),i.setAttribute("width",this.width),i.setAttribute("height",this.height),i.setAttribute("rx",this.Zt),t.append(i);let e=_("rect");e.setAttribute("width",this.width),e.setAttribute("height",this.height),e.setAttribute("rx",this.Zt),e.style.transformOrigin="center",e.style.transformBox="fill-box",e.style.transition="all 1s",e.style.willChange="transform",this.ei=e,Y.append(e),this.m(),Mt.style.width="96px",Mt.style.opacity="1",setTimeout((()=>{this.scale=1,kt.innerText=ei.length}),500),setTimeout((()=>{t.style.transition="",t.style.willChange="",e.style.willChange="",e.style.transition=""}),1500)}update(t){if(this.advance(),t&&this.Ft&&this.Ft--,Math.random()>.96&&(this.target=this.Et()),this.target){let t=l(this,this.target)-this.rotation,i=c(this.target),e=i.h(this)>1;if(Math.abs(t%(2*Math.PI))>.1)this.rotation+=t>0?.1:-.1;else if(e>.1){let t=i.t(this).normalize(),e=this.x+.1*t.x,s=this.y+.1*t.y;this.ft.children.some((t=>{if(this==t)return!1;let i=c(t),h=i.h({x:this.x,y:this.y}),r=i.h({x:e,y:s});return 4>r&&h>r}))||(this.x=e,this.y=s)}}}m(){super.m();let t=8*this.ft.x+this.x-this.width/2,i=8*this.ft.y+this.y-this.height/2;this.ot.style.transform=`translate(${t}px,${i}px)rotate(${n(this.rotation)-90}deg)scale(${this.scale*(this.Ft?.6:1)})`,this.ei.style.transform=`translate(${t}px,${i}px)rotate(${n(this.rotation)-90}deg)scale(${(this.scale+.04)*(this.Ft?.6:1)})`}}let hi=[];class ri extends Xt{constructor(t){super({...t,ci:w}),this._t=240,this.ut=w,hi.push(this),setTimeout((()=>this.oi({})),2e3),setTimeout((()=>this.oi({})),3e3),setTimeout((()=>this.oi({Ft:(hi.length-1)%2})),4e3),this.li=!0,setTimeout((()=>this.li=!1),3e3)}yi(){if(this.children.length>=7)return!1;for(let t=0;2>t;t++)setTimeout((()=>this.children.filter((t=>!t.Ft))[t].It()),1e3*t),setTimeout((()=>this.children.filter((t=>!t.Ft))[t].Kt()),7e3),t&&setTimeout((()=>this.oi({Ft:!0})),1e3*t+7e3);return!0}oi({Ft:t=!1}){super.oi(new si({ft:this,Ft:t}))}update(t,i){super.update(t,i)}}let ai=[];class oi extends Et{constructor(t){super({...t,ft:t.ft,width:.7,height:1,Zt:1,color:b}),ai.push(this)}gt(){this.scale=0,this.ot=_("g"),this.ot.style.transformOrigin="center",this.ot.style.transformBox="fill-box",this.ot.style.transition="all 1s",this.ot.style.willChange="transform",W.append(this.ot),this.Mt=_("rect"),this.Mt.setAttribute("fill",b),this.Mt.setAttribute("width",this.width),this.Mt.setAttribute("height",this.height),this.Mt.setAttribute("rx",this.Zt),this.Mt.style.transition="fill.2s",this.ot.append(this.Mt),this.m(),$t.style.width="96px",$t.style.opacity="1",setTimeout((()=>{this.scale=1,vt.innerText=ai.length}),500),setTimeout((()=>{this.ot.style.transition="",this.ot.style.willChange=""}),1500),setTimeout((()=>{this.Mt.setAttribute("fill",T)}),4e3)}update(t){if(this.advance(),t&&this.Ft&&this.Ft--,Math.random()>.96&&(this.target=this.Et()),this.target){let t=l(this,this.target)-this.rotation,i=c(this.target),e=i.h(this)>1;if(Math.abs(t%(2*Math.PI))>.1)this.rotation+=t>0?.1:-.1;else if(e>.1){let t=i.t(this).normalize(),e=this.x+.1*t.x,s=this.y+.1*t.y;this.ft.children.some((t=>{if(this==t)return!1;let i=c(t),h=i.h({x:this.x,y:this.y}),r=i.h({x:e,y:s});return 4>r&&h>r}))||(this.x=e,this.y=s)}}}m(){super.m();let t=8*this.ft.x+this.x-this.width/2,i=8*this.ft.y+this.y-this.height/2;this.ot.style.transform=`translate(${t}px,${i}px)rotate(${n(this.rotation)-90}deg)scale(${this.scale*(this.Ft?.6:1)})`,this.Qt&&(this.Mt.style.fill=b)}}let ni=[];class li extends Xt{constructor(t){super({...t,ci:"#eee",width:2,height:2}),this._t=1300,this.ut=b,ni.push(this),setTimeout((()=>this.oi({})),2e3+(t.delay??0)),setTimeout((()=>this.oi({})),2500+(t.delay??0)),setTimeout((()=>this.oi({})),3e3+(t.delay??0)),setTimeout((()=>this.oi({})),3500+(t.delay??0)),setTimeout((()=>this.oi({})),4e3+(t.delay??0)),this.li=!0,setTimeout((()=>this.li=!1),3e3)}yi(){if(this.children.length>=9)return!1;for(let t=0;2>t;t++)setTimeout((()=>this.children[t].It()),1e3*t),setTimeout((()=>this.children[t].Kt()),7e3);for(let t=0;4>t;t++)setTimeout((()=>this.oi({})),1e3*t+7e3);return!0}oi({Ft:t=!1}){super.oi(new oi({ft:this,Ft:t}))}update(t,i){super.update(t,i)}}let pi=[m,w],ci=3e3,di=()=>Vt.length<pi.length?pi[Vt.length]:pi.at(Math.random()*pi.length),ui=()=>{if(Vt.length<pi.length)return pi[Vt.length-1];let t={};ft.filter((t=>t.ut!=b)).forEach((i=>{t[i.ut]=t[i.ut]?t[i.ut]+1:1}));let i={};Vt.filter((t=>t.ut!=b)).forEach((t=>{i[t.ut]=i[t.ut]?i[t.ut]+1:1}));let e=[];Object.keys(i).forEach((s=>{e.push(i[s]/t[s])}));let s=Object.keys(i)[(t=>{let i=t.reduce(((t,i)=>t+i),0),e=Math.random()*i,s=0;for(let h=0;h<t.length;h++)if(s+=t[h],s>e)return h;return null})(e)];return s},fi=({width:t=1,height:i=1,anchor:e={x:13,y:7,width:0,height:0},mi:s=0,maxDistance:h=99,gi:r=9,wi:a={x:0,y:0}})=>{let o=0;for(;r>o;){o++;let r=Math.max(3,e.x-h),n=Math.min(23-t+1,e.x+e.width+h-t+1),l=Math.max(2,e.y-h),p=Math.min(12-i+1,e.y+e.height+h-i+1),c=Math.floor(r+Math.random()*(n-r)),d=Math.floor(l+Math.random()*(p-l));if(c<e.x+e.width+s-1&&c>e.x-s-t+1&&d<e.y+e.height+s-1&&d>e.y-s-i+1)continue;if(3>c+a.x||c+a.x>22||2>d+a.y||d+a.y>11)continue;if(Nt.some((e=>e.jt.some((e=>{for(let s=0;t>s;s++)for(let t=0;i>t;t++)if(c+s==e.x&&d+t==e.y)return!0;return!1})))))continue;if(Vt.some((e=>e.st.some((e=>{for(let s=0;t>s;s++)for(let t=0;i>t;t++)if(c+s==e.x&&d+t==e.y)return!0;return!1})))))continue;let u=t=>t.x==c+a.x&&t.y==d+a.y;if(!Vt.some((t=>t.st.some(u)))&&!X.some((e=>{for(let s=0;t>s;s++)for(let t=0;i>t;t++)if(c+s==e.st[0].x&&d+t==e.st[0].y||c+s==e.st[1].x&&d+t==e.st[1].y)return!0;return c+a.x==e.st[0].x&&d+a.y==e.st[0].y||c+a.x==e.st[1].x&&d+a.y==e.st[1].y})))return{x:c,y:d}}return null},xi=()=>{let t=Math.random()>.5,i=t?{w:2,bi:3}:{w:3,bi:2},e=Math.floor(Math.random()*i.w),s=Math.floor(Math.random()*i.bi);return{width:i.w,height:i.bi,si:[{x:e,y:s},{x:t?3*e-1:e,y:t?s:3*s-1}]}},yi=()=>{let t,i=Math.random();return t=.25>i?{x:0,y:-1}:.5>i?{x:1,y:0}:.75>i?{x:0,y:1}:{x:-1,y:0},{zt:t}},mi=0,gi=0,wi=0,bi=0,Mi={Mi:!1},ki=(t,i)=>{let e=!1;if(t%ci==0&&(mi=Math.floor(200*Math.random()),gi=Math.floor(200*Math.random()),wi=Math.floor(200*Math.random()),bi=Math.floor(200*Math.random())),0==t)if(Math.random()>.5){let t=6,i=4,e=fi({width:t,height:i,mi:5,gi:32});e&&Yt({width:t,height:i,x:e.x,y:e.y})}else{let t=fi({width:4,height:4,mi:5,gi:16});t&&Yt({width:4,height:4,x:t.x,y:t.y});let i=fi({width:3,height:2,mi:5,gi:16});i&&Yt({width:3,height:2,x:i.x,y:i.y});let e=fi({width:3,height:2,mi:5,gi:16});e&&Yt({width:3,height:2,x:e.x,y:e.y})}if(0==t||t>1e3&&t%ci==0+(Vt.length?mi:0))if(t>1e4&&!ni.length){let t=Nt.find((t=>t.width>=4&&t.height>=4)),i=13>t.x?1:0,e=13>t.x?2:-1,s=13>t.x?3:-2,h=7>t.y?1:0,r=t.x+t.width/2-1,a=t.y+t.height/2-1;new li({x:r,y:a,si:[{x:i,y:h,fixed:!0,lt:!0},{x:t.width>4?s:e,y:h,fixed:!0,lt:!0}]})}else{let{width:s,height:h,si:r}=xi(),a=di(),o=fi({width:s,height:h,anchor:Vt.length>1?ft.filter((t=>t.ut==a)).at(Math.random()*ft.length):Vt[Vt.length-1],maxDistance:Vt.length+2,mi:Vt.length?2:0,gi:3500>t?32:16,wi:{x:r[1].x,y:r[1].y}});if(!o){let t=ct(Vt);for(let i=0;i<t.length&&!e;i++)t[i].yi()&&(e=!0);return}if(a==m)return void new ii({width:s,height:h,x:o.x,y:o.y,si:r,delay:i});if(a==w)return void new ri({width:s,height:h,x:o.x,y:o.y,si:r,delay:i})}if(t%ci!=500+gi)if(t%ci==600+gi&&Mi.Mi){let{zt:t}=yi(),i=Vt.filter((t=>t.ut==b)).length&&2>ft.filter((t=>t.ut==b)).length?Vt.find((t=>t.ut==b)):Vt.length>2?Vt.at(Math.random()*Vt.length):Vt[Vt.length-1],e=fi({anchor:{x:i.x,y:i.y,width:i.width,height:i.height},mi:3,maxDistance:2+Vt.length,wi:t});e?(new xt({x:e.x,y:e.y,ut:i.ut,zt:t}),Mi.Mi=!1):Mi.Mi=!0}else if(t%ci==700+gi&&Mi.Mi){let{zt:t}=yi(),i=Vt.filter((t=>t.ut==b)).length&&2>ft.filter((t=>t.ut==b)).length?Vt.find((t=>t.ut==b)):Vt.length>2?Vt.at(Math.random()*Vt.length):Vt[Vt.length-1],e=fi({anchor:{x:i.x,y:i.y,width:i.width,height:i.height},mi:3,maxDistance:2+Vt.length,wi:t});e?(new xt({x:e.x,y:e.y,ut:i.ut,zt:t}),Mi.Mi=!1):Mi.Mi=!0}else if(t%ci!=1500+wi){if(t%ci==1600+wi&&Mi.Mi){let{zt:t}=yi(),i=ui(),e=ft.filter((t=>t.ut==i)),s=e.at(Math.random()*e.length);if(!s)return;let h=fi({anchor:{x:s.x,y:s.y,width:1,height:1},mi:1,maxDistance:Vt.length,wi:t});h?(new xt({x:h.x,y:h.y,ut:i,zt:t}),Mi.Mi=!1):Mi.Mi=!0}else if(t%ci==1600+wi&&Mi.Mi){let{zt:t}=yi(),i=ui(),e=ft.filter((t=>t.ut==i)),s=e.at(Math.random()*e.length);if(!s)return;let h=fi({anchor:{x:s.x,y:s.y,width:1,height:1},mi:1,maxDistance:Vt.length,wi:t});h?(new xt({x:h.x,y:h.y,ut:i,zt:t}),Mi.Mi=!1):Mi.Mi=!0}else if(t%ci==2500+bi&&t>1e4){let{width:s,height:h,si:r}=xi(),a=di(),o=fi({width:s,height:h,anchor:Vt.length>1?ft.filter((t=>t.ut==a)).at(Math.random()*ft.length):Vt[Vt.length-1],maxDistance:Vt.length+2,mi:Vt.length?2:0,gi:3500>t?32:16,wi:{x:r[1].x,y:r[1].y}});if(!o){let t=ct(Vt);for(let i=0;i<t.length&&!e;i++)t[i].yi()&&(e=!0);return}if(a==m)return void new ii({width:s,height:h,x:o.x,y:o.y,si:r,delay:i});if(a==w)return void new ri({width:s,height:h,x:o.x,y:o.y,si:r,delay:i})}}else{let{zt:t}=yi(),i=ui(),e=ft.filter((t=>t.ut==i)),s=e.at(Math.random()*e.length);if(!s)return;let h=fi({anchor:{x:s.x,y:s.y,width:1,height:1},mi:1,maxDistance:Vt.length,wi:t});h?(new xt({x:h.x,y:h.y,ut:i,zt:t}),Mi.Mi=!1):Mi.Mi=!0}else{let{zt:t}=yi(),i=Vt.filter((t=>t.ut==b)).length&&2>ft.filter((t=>t.ut==b)).length?Vt.find((t=>t.ut==b)):Vt.length>2?Vt.at(Math.random()*Vt.length):Vt[Vt.length-1],e=fi({anchor:{x:i.x,y:i.y,width:i.width,height:i.height},mi:3,maxDistance:2+Vt.length,wi:t});e?(new xt({x:e.x,y:e.y,ut:i.ut,zt:t}),Mi.Mi=!1):Mi.Mi=!0}},$i=S();$i.style.cssText="backdrop-filter:blur(8px);position:absolute;inset:0;pointer-events:none;background:#fffb;";let vi=S(),Ti=S(),Li=S(),_i=S(),Si=S(),Pi=S(),zi=S(),Di=S("button"),Bi=S(),Ai=S("button"),Ci=S(),Ni=yt(),Wi=S(),Yi=mt(),qi=S(),Oi=gt(),ji=S(),Fi=()=>{vi.style.transition="opacity 1s 2s",$i.style.transition="opacity 1s 1s",Ti.style.transition="opacity.3s.7s",Li.style.transition="opacity.3s.6s",_i.style.transition="opacity.3s.5s",Ci.style.transition="opacity.3s.4s",Wi.style.transition="opacity.3s.4s",qi.style.transition="opacity.3s.3s",ji.style.transition="opacity.3s.3s",zi.style.transition="opacity.3s.2s",Bi.style.transition="opacity.3s.1s",vi.style.pointerEvents="none",vi.style.opacity=0,$i.style.opacity=0,Ti.style.opacity=0,Li.style.opacity=0,_i.style.opacity=0,Ci.style.opacity=0,Wi.style.opacity=0,qi.style.opacity=0,zi.style.opacity=0,Bi.style.opacity=0},Zi=S(),Qi=S(),Ui=S(),Ji=S(),Ri=S(),Hi=S("button"),Gi=S(),Ei=S("button"),Ii=(t,i)=>{$i.style.clipPath="polygon(0 0, calc(20dvw + 400px) 0, calc(20dvw + 350px) 100%, 0 100%)",$i.style.transition="clip-path 1s, opacity 2s",Qi.style.transition="opacity .5s 1s",Gi.style.transition="opacity .5s 1.2s",Ri.style.transition="opacity .5s 1.4s",Ui.style.transition="opacity .5s 1.6s",i&&($i.style.transition="opacity 0s",Qi.style.transition="opacity .5s .4s",Gi.style.transition="opacity .5s .6s",Ri.style.transition="opacity .5s .8s",Ui.style.transition="opacity .5s 1s"),localStorage.getItem("Tiny Yurts")&&(Ui.innerText="Highscore: "+localStorage.getItem("Tiny Yurts"));let e=ot(t.x-13-3+t.width/2,t.y-7-2+t.height/2),s=window.innerWidth/4;B.style.transition="",B.style.transform=`translate(${s}px,0)rotate(-17deg)scale(2)translate(${-e.x}px,${-e.y}px)`,Zi.style.pointerEvents="",$i.style.opacity=1,Qi.style.opacity=1,Ui.style.opacity=1,Ri.style.opacity=1,Gi.style.opacity=1},Ki=0,Vi=0,Xi=0,te=!1;var ie,ee,se;(()=>{let t=S("style");t.innerText=`body{position:relative;font-family:system-ui;font-weight:700;color:#443;margin:0;width:100vw;height:100vh;user-select:none}button{font-weight:700;font-family:system-ui;border:none;padding:0 20px;font-size:32px;height:56px;border-radius:48px;background:#fff;box-shadow:0 0 0 1px ${v};transition:all.2s}button:hover{box-shadow:4px 4px 0 1px ${v}}button:active{box-shadow:0 0 0 1px ${v};transform:scale(.95)}`,document.head.append(t);let i=S();i.style.cssText="position:absolute;inset:0;display:grid;overflow:hidden;pointer-events:none;",document.body.append(i),Tt.style.cssText="display:flex;position:absolute;top:16px;left:16px;",Tt.style.ki="opacity 1s",Tt.style.opacity=0,wt.style.cssText="display:flex;align-items:center;gap:8px;transition:width 1s,opacity 1s 1s";let e=yt();wt.style.width=0,wt.style.opacity=0,e.style.width="48px",e.style.height="48px",wt.append(e,bt),Mt.style.cssText="display:flex;align-items:center;gap:8px;transition:width 1s,opacity 1s 1s";let s=mt();Mt.style.width=0,Mt.style.opacity=0,s.style.width="48px",s.style.height="48px",Mt.append(s,kt),$t.style.cssText="display:flex;align-items:center;gap:8px;transition:width 1s,opacity 1s 1s";let h=gt();$t.style.width=0,$t.style.opacity=0,h.style.width="48px",h.style.height="48px",$t.append(h,vt),Tt.append(wt,Mt,$t),Lt.style.cssText="position:absolute;top:16px;right:16px;display:grid;place-items:center;border-radius:64px;background:"+k,Lt.style.width="80px",Lt.style.height="80px",Lt.style.opacity=0,Lt.style.transition="opacity 1s";let r=_("svg");r.setAttribute("stroke-linejoin","round"),r.setAttribute("stroke-linecap","round"),r.setAttribute("viewBox","0 0 16 16"),r.style.width="80px",r.style.height="80px";for(let l=75;350>l;l+=25){let t=_("path");t.setAttribute("fill","none"),t.setAttribute("stroke","#eee"),t.setAttribute("transform-origin","center"),t.setAttribute("d","m8 14.5v0"),t.style.transform=`rotate(${l}grad)`,r.append(t)}Bt.setAttribute("stroke","#eee"),Bt.setAttribute("transform-origin","center"),Bt.setAttribute("d","m8 4v4"),r.append(Bt),_t.style.cssText="position:absolute;bottom:8px;color:#eee",Lt.append(r,_t),St.style.cssText="position:absolute;display:grid;place-items:center;place-self:center;bottom:20px;margin:0 auto;border-radius:20px;background:"+k,2*screen.height<screen.width&&(St.style.left="20px"),St.style.transform="rotate(-45deg)",St.style.opacity=0,St.style.transition="scale.4s cubic-bezier(.5,2,.5,1), opacity 1s",St.style.width="72px",St.style.height="72px",Pt.style.cssText=`display:grid;place-items:center;position:absolute;border-radius:64px;border:6px solid ${k};transform:translate(28px,28px)rotate(45deg);font-size:20px;background:#eee;transition:all.5s}`,Pt.style.width="28px",Pt.style.height="28px";let a=_("svg");a.setAttribute("viewBox","0 0 18 18"),a.style.width="54px",a.style.height="54px",a.style.transform="rotate(45deg)";let o=_("path");o.setAttribute("fill","none"),o.setAttribute("stroke","#eee"),o.setAttribute("stroke-linecap","round"),o.setAttribute("stroke-width",2),o.setAttribute("d","M11 1h-3q-2 0-2 2t2 2h4q2 0 2 2t-2 2h-6q-2 0-2 2t2 2h4q2 0 2 2t-2 2h-3"),a.append(o),St.append(a,Pt);let n=_("svg");n.setAttribute("viewBox","0 0 16 16"),n.setAttribute("width",64),n.setAttribute("height",64),Dt.setAttribute("fill",k),Dt.setAttribute("stroke",k),Dt.setAttribute("stroke-width",2),Dt.setAttribute("stroke-linecap","round"),Dt.setAttribute("stroke-linejoin","round"),Dt.setAttribute("d","M6 6 6 10M10 6 10 8 10 10"),Dt.style.transition="all.2s",Dt.style.transformOrigin="center",Dt.style.transform="rotate(180deg)",n.append(Dt),zt.style.cssText="position:absolute;top:24px;right:112px;padding:0;pointer-events:all",zt.style.width="64px",zt.style.height="64px",zt.style.opacity=0,zt.style.transition="all.2s,opacity 1s",zt.append(n),i.append(Tt,Lt,zt,St)})(),document.body.append($i),$i.style.opacity=0,ie=()=>{B.style.transition="transform 2s",B.style.transform=`rotate(0)scale(2)translate(0,${ot(0,14).y/-2}px)`,wt.style.width=0,Mt.style.width=0,$t.style.width=0,wt.style.opacity=0,Mt.style.opacity=0,$t.style.opacity=0,bt.innerText=0,kt.innerText=0,vt.innerText=0,zt.style.opacity=0,setTimeout((()=>{hi.length=0,ti.length=0,dt.length=0,Vt.length=0,Ht.length=0,It.length=0,ei.length=0,ai.length=0,ft.length=0,X.length=0,Nt.length=0,Ki=1,Xi=1,Vi=1,rt.ct=9,Pt.innerText=rt.ct,K(),Fi(),B.style.transform="",setTimeout((()=>{ki(0),he.start()}),1e3)}),1e3)},ee=()=>{te=!1,B.style.transition="transform 2s",B.style.transform=`rotate(0)scale(2)translate(0,${ot(0,14).y/-2}px)`,rt.ct=9,wt.style.width=0,Mt.style.width=0,$t.style.width=0,wt.style.opacity=0,Mt.style.opacity=0,$t.style.opacity=0,bt.innerText=0,kt.innerText=0,vt.innerText=0,setTimeout((()=>{hi.length=0,ti.length=0,dt.length=0,Vt.length=0,Ht.length=0,It.length=0,ei.length=0,ai.length=0,ft.length=0,X.length=0,Nt.length=0,Ki=0,Vi=0,Xi=0,K(),Fi(),B.style.transform="",Pt.innerText=rt.ct,setTimeout((()=>{ki(Xi,te),Ii(Vt[0]),he.start()}),750)}),500)},vi.style.cssText="position:absolute;inset:0;padding:10vmin;pointer-events:none;opacity:0",Ti.style.cssText="font-size:72px;opacity:0",Ti.innerText="Game Over",Li.style.cssText="margin-top:48px;font-size:24px;opacity:0",Li.innerText="Too few people could tend to this farm in time.",_i.style.cssText="margin-top:16px;font-size:24px;opacity:0",Si.style.cssText="display:flex;gap:4px;margin-top:24px;font-size:24px",Ci.style.cssText="display:inline-flex;padding:6px 10px;line-height:24px;color:#fff;border-radius:24px;opacity:0;background:"+k,Wi.style.cssText="display:inline-flex;padding:6px 10px;line-height:24px;color:#fff;border-radius:24px;opacity:0;background:"+k,qi.style.cssText="display:inline-flex;padding:6px 10px;line-height:24px;color:#fff;border-radius:24px;opacity:0;background:"+k,ji.style.cssText="display:inline-flex;padding:6px 10px;line-height:24px;color:#fff;border-radius:24px;opacity:0;background:"+k,Ni.style.width="24px",Ni.style.height="24px",Yi.style.width="24px",Yi.style.height="24px",Oi.style.width="24px",Oi.style.height="24px",Bi.style.opacity=0,zi.style.opacity=0,Bi.append(Ai),zi.append(Di),Di.innerText="Restart",Ai.innerText="Menu",Di.addEventListener("click",ie),Ai.addEventListener("click",ee),Pi.append(zi,Bi),Pi.style.cssText="display:grid;gap:16px;margin-top:48px",vi.append(Ti,Li,_i,Si,Pi),document.body.append(vi),function(e,{$i:s=!1}={}){t=document.getElementById(e)||e||document.querySelector("canvas"),s&&(t=t||new Proxy({},a)),i=t.getContext("2d")||new Proxy({},a),i.imageSmoothingEnabled=!1,r("init")}(null,{$i:!0}),P.addEventListener("pointerdown",(()=>{C.style.opacity=.9,D.style.opacity=.9})),P.addEventListener("pointermove",(t=>{1==t.buttons&&(C.style.opacity=.9,D.style.opacity=.9,A.style.opacity=0,z.style.opacity=0)})),P.addEventListener("pointerup",(()=>{C.style.opacity=0,D.style.opacity=0})),P.addEventListener("contextmenu",(t=>t.preventDefault())),Q.addEventListener("pointerdown",(t=>{t.stopPropagation();let i=Q.getBoundingClientRect(),{x:e,y:s}=at(t.x-i.left,t.y-i.top);if(1==t.buttons){A.style.opacity=1,z.style.opacity=.9;let t=Ft(e,s),i=Zt(e,s);if(t&&!i)return;Ot=!0,qt={x:e,y:s};let h=jt(qt.x,qt.y);h?(h.qt(),Q.style.cursor="grabbing"):(Rt.setAttribute("d","M0 0 0 0"),Jt.setAttribute("transform",`translate(${Ut(e)} ${Ut(s)})`),Rt.style.opacity=1,Rt.style.scale=1.3,Rt.style.transition="all.2s, scale.4s cubic-bezier(.5,2,.5,1)")}else 2==t.buttons&&(Q.style.cursor="crosshair",C.style.opacity=.9,D.style.opacity=.9,At(e,s))})),Q.addEventListener("pointermove",(t=>{t.stopPropagation();let i=Q.getBoundingClientRect(),{x:e,y:s}=at(t.x-i.left,t.y-i.top);if(2==t.buttons)return Q.style.cursor="crosshair",C.style.opacity=.9,D.style.opacity=.9,void At(e,s);let h=jt(qt.x,qt.y),r=jt(e,s),a=Ft(e,s),o=Zt(e,s);if(a&&!o)return void(Q.style.cursor="not-allowed");if(r&&1!=t.buttons?Q.style.cursor="grab":1==t.buttons&&(h&&r||h&&!r)?Q.style.cursor="grabbing":Qt(qt.x,qt.y,e,s)||(Q.style.cursor="cell"),1!=t.buttons)return;if(C.style.opacity=0,D.style.opacity=0,A.style.opacity=1,z.style.opacity=.9,!Ot)return;let n=e-qt.x,l=s-qt.y,p=new c({x:Ut(qt.x),y:Ut(qt.y)}),d=`${Ut(n/2-.5)} ${Ut(l/2-.5)}`;if(Jt.setAttribute("transform",`translate(${p.x} ${p.y})`),Rt.setAttribute("d","M0 0 "+d),Rt.style.opacity=1,Rt.style.scale=1.3,0==n&&0==l||Math.abs(n)>1||Math.abs(l)>1)return void Rt.setAttribute("d","M0 0 0 0");if(Rt.style.transition="all.2s, scale.4s cubic-bezier(.5,2,.5,1)",Rt.style.scale=1,!(({vi:t,from:i,to:e})=>{let s=Q.getBoundingClientRect().width/20,h=t.x-s*(i.x-3+.5),r=t.y-s*(i.y-2+.5),a=0>e.y-i.y,o=e.x-i.x>0,n=e.y-i.y>0,l=0>e.x-i.x,p=e.x==i.x,c=e.y==i.y;return a&&p?4-s>r:a&&o?h-r>2*s-4:c&&o?h>s-4:n&&o?h+r>2*s-4:n&&p?r>s-4:n&&l?2*-s+4>h+-r:c&&l?4-s>h:!(!a||!l)&&2*-s+4>h+r})({vi:{x:t.x-i.left,y:t.y-i.top},from:{x:qt.x,y:qt.y},to:{x:e,y:s}}))return;if(h&&!r)return h.Bt(e,s),qt={x:e,y:s},h.Ot(),void(Rt.style.transition="");if(r&&!h)return r.Bt(qt.x,qt.y),qt={},Ot=!1,void r.Ot();if(h&&r)return;if(0>=rt.ct)return St.style.scale=1.1,setTimeout((()=>{St.style.scale=1}),300),Rt.style.opacity=0,qt={},void(Ot=!1);if(Qt(qt.x,qt.y,e,s))return void(Q.style.cursor="not-allowed");let u=new ht({st:[{x:qt.x,y:qt.y},{x:e,y:s}]});rt.ct--,Pt.innerText=rt.ct,st({Dt:[{x:qt.x,y:qt.y},{x:e,y:s}],Ti:u}),qt={x:e,y:s},Rt.style.transition=""})),Q.addEventListener("pointerup",(t=>{t.stopPropagation();let i=Q.getBoundingClientRect(),{x:e,y:s}=at(t.x-i.left,t.y-i.top),h=jt(qt.x,qt.y),r=jt(e,s),a=Ft(e,s),o=Zt(e,s);Q.style.cursor=a&&!o?"not-allowed":r?"grab":"cell",A.style.opacity=0,z.style.opacity=0,C.style.opacity=0,D.style.opacity=0,Rt.style.opacity=0,Rt.style.scale=0,h&&h.Ot(),qt={},Ot=!1})),se=()=>{B.style.transition="transform 2s",B.style.transform="rotate(0) scale(1) translate(0, 0)",Pt.innerText=rt.ct,Tt.style.opacity=1,Zi.style.pointerEvents="none",$i.style.transition="opacity 1s.6s",Qi.style.transition="opacity.3s.4s",Gi.style.transition="opacity.3s.3s",Ri.style.transition="opacity.3s.2s",Ui.style.transition="opacity.3s.1s",$i.style.opacity=0,Gi.style.opacity=0,Ri.style.opacity=0,Gi.style.transition=0,Ui.style.opacity=0,Qi.style.opacity=0,te=!0,Ki=Xi=1},Zi.style.cssText="position:absolute;inset:0;padding:10vmin;pointer-events:none;display:flex;flex-direction:column;",$i.style.clipPath="polygon(0 0, calc(20dvw + 400px) 0, calc(20dvw + 350px) 100%, 0 100%)",Qi.style.cssText="font-size:72px;opacity:0;",Qi.innerText="Tiny Yurts",Ui.style.cssText="margin:auto 4px 0;opacity:0",localStorage.getItem("Tiny Yurts")&&(Ui.innerText="Highscore: "+localStorage.getItem("Tiny Yurts")),Hi.innerText="Start",Hi.addEventListener("click",se),Ri.style.opacity=0,Ei.innerText="Fullscreen",Ei.addEventListener("click",(()=>{document.documentElement.requestFullscreen(),screen.orientation.lock("landscape")})),Gi.style.opacity=0,Ji.style.cssText="display:grid;gap:16px;margin-top:48px",Ri.append(Hi),Gi.append(Ei),Ji.append(Gi,Ri),Zi.append(Qi,Ji,Ui),document.body.append(Zi),ki(Xi,2500),Ii(Vt[0],!0);let he=function({Li:t=60,_i:i=!0,update:s=e,m:a,context:n=o(),blur:l=!1}={}){let p,c,d,u,x,y=0,m=1e3/t,g=1/t,w=i?f:e,b=!0;function M(){if(c=requestAnimationFrame(M),b&&(d=performance.now(),u=d-p,p=d,1e3>=u)){for(r("tick"),y+=u;y>=m;)x.update(g),y-=m;w(x.context),x.m()}}return l||(window.addEventListener("focus",(()=>{b=!0})),window.addEventListener("blur",(()=>{b=!1}))),h("init",(()=>{x.context??(x.context=o())})),x={update:s,m:a,Si:!0,context:n,start(){p=performance.now(),this.Si=!1,requestAnimationFrame(M)},stop(){this.Si=!0,cancelAnimationFrame(c)}},x}({blur:!0,update(){if(te){if(ki(Xi,te),50==Xi&&(Tt.style.opacity=1),100==Xi&&(St.style.opacity=1),150==Xi&&(Lt.style.opacity=1),250==Xi&&(zt.style.opacity=1),Xi%8640==0&&99>rt.ct){St.style.scale=1.1,Pt.innerText="+9",setTimeout((()=>Pt.innerText=rt.ct),1300);for(let t=0;9>t;t++)setTimeout((()=>{99>rt.ct&&(rt.ct++,Pt.innerText=rt.ct)}),1300+100*t);setTimeout((()=>{St.style.scale=1}),300)}switch(Bt.style.transform=`rotate(${Xi/2}deg)`,Math.floor(Xi/720%12)){case 0:_t.innerText="Jan";break;case 1:_t.innerText="Feb";break;case 2:_t.innerText="Mar";break;case 3:_t.innerText="Apr";break;case 4:_t.innerText="May";break;case 5:_t.innerText="Jun";break;case 6:_t.innerText="Jul";break;case 7:_t.innerText="Aug";break;case 8:_t.innerText="Sep";break;case 9:_t.innerText="Oct";break;case 10:_t.innerText="Nov";break;case 11:_t.innerText="Dec"}}switch(Ki++,Xi++,Ki%4){case 0:lt=(()=>{let t=[];for(let i=0;26>i;i++)for(let e=0;14>e;e++)t.push({x:i,y:e,dt:[]});return X.forEach((i=>{t&&(t.find((t=>t.x==i.st[0].x&&t.y==i.st[0].y)).dt.push({x:i.st[1].x,y:i.st[1].y}),t.find((t=>t.x==i.st[1].x&&t.y==i.st[1].y)).dt.push({x:i.st[0].x,y:i.st[0].y}))})),t})();break;case 1:ti.forEach((t=>t.update(te,Xi)));break;case 2:hi.forEach((t=>t.update(te,Xi)));break;case 3:ni.forEach((t=>t.update(te,Xi)))}60>Ki||(Ki=0),Vt.forEach((t=>{if(!t.u){he.stop();let i=ot(t.x-13-3+t.width/2,t.y-7-2+t.height/2);B.style.transition="transform 2s ease-out .5s",B.style.transform=`rotate(-17deg)scale(2)translate(${-i.x}px,${-i.y}px)`,wt.style.opacity=0,Mt.style.opacity=0,$t.style.opacity=0,Lt.style.opacity=0,St.style.opacity=0,zt.style.opacity=0,(()=>{let t=2*ft.length+Ht.length;t>localStorage.getItem("Tiny Yurts")&&localStorage.setItem("Tiny Yurts",t),$i.style.clipPath="polygon(0 0,100% 0, 100% 100%, 0 100%)",$i.style.transition="opacity 2s 1s",Ti.style.transition="opacity 1s 2s",Li.style.transition="opacity 1s 2s",_i.style.transition="opacity 1s 3s",Ci.style.transition="opacity 1s 3.2s",Wi.style.transition="opacity 1s 3.6s",qi.style.transition="opacity 1s 3.8s",ji.style.transition="opacity 1s 4s",zi.style.transition="opacity 1s 5s",Bi.style.transition="opacity 1s 5.2s",Ci.innerHTML="",Ci.append(Ni,""+It.length),Wi.innerHTML="",Wi.append(Yi,""+ei.length),qi.innerHTML="",qi.append(Oi,""+ai.length),ji.innerHTML="Score:"+t;let i=S("u");i.innerText=2*ft.length+" settlers";let e=S("u");e.innerText=Ht.length+" animals",_i.innerHTML="",_i.append(i," and ",e," lived in your camp."),Si.innerHTML="",Si.append(Ci," ",Wi," ",qi," ",ji),Tt.style.opacity=0,setTimeout((()=>{vi.style.pointerEvents="",vi.style.opacity=1,$i.style.opacity=1,Ti.style.opacity=1,Li.style.opacity=1,_i.style.opacity=1,Ci.style.opacity=1,Wi.style.opacity=1,qi.style.opacity=1,ji.style.opacity=1,zi.style.opacity=1,Bi.style.opacity=1}))})()}})),dt.forEach((t=>t.update()))},m(){switch(Vi++,Vi%4){case 0:break;case 1:ti.forEach((t=>t.m()));break;case 2:hi.forEach((t=>t.m()));break;case 3:ni.forEach((t=>t.m()))}60>Vi||(Vi=0),dt.forEach((t=>t.m()))}}),re=()=>{he.Si?(he.start(),Dt.setAttribute("d","M6 6 6 10M10 6 10 8 10 10"),Dt.style.transform="rotate(180deg)"):(he.stop(),Dt.setAttribute("d","M7 6 7 10M7 6 10 8 7 10"),Dt.style.transform="rotate(0)")};zt.addEventListener("click",re),document.addEventListener("keypress",(t=>{" "==t.key&&(t.target!=zt&&re(),zt.style.transform="scale(.95)",setTimeout((()=>zt.style.transform=""),150))})),setTimeout((()=>{he.start()}),1e3);

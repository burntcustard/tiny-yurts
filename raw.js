/**
 * @preserve
 * Kontra.js v9.0.0
 */
let t,e,i=()=>{},s={};function h(t,e){s[t]=s[t]||[],s[t].push(e)}function r(t,...e){(s[t]||[]).map((t=>t(...e)))}let a={get:(t,e)=>"_proxy"==e||i};function o(){return e}function n(t){return 180*t/Math.PI}function l(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}class d{constructor(t=0,e=0,i={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}set(t){this.x=t.x,this.y=t.y}add(t){return new d(this.x+t.x,this.y+t.y,this)}t(t){return new d(this.x-t.x,this.y-t.y,this)}scale(t){return new d(this.x*t,this.y*t)}normalize(t=this.length()||1){return new d(this.x/t,this.y/t)}i(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}h(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.i(t)/(this.length()*t.length()))}}function p(){return new d(...arguments)}class c{constructor(t){return this.init(t)}init(t={}){this.position=p(),this.o=p(),this.l=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.o;t&&(e=e.scale(t)),this.position=this.position.add(e),this.p(),this.l--}get dx(){return this.o.x}get dy(){return this.o.y}set dx(t){this.o.x=t}set dy(t){this.o.y=t}u(){return this.l>0}p(){}}class u extends c{init({width:t=0,height:e=0,context:i=o(),m:s=this.g,update:r=this.advance,children:a=[],...n}={}){this.M=[],super.init({width:t,height:e,context:i,...n}),this.k=!0,this.v(),this.$(a),this.T=s,this.L=r,h("init",(()=>{this.context??(this.context=o())}))}update(t){this.L(t),this.children.map((e=>e.update&&e.update(t)))}m(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.T(),this.children.map((t=>t.m&&t.m())),t.restore()}g(){}p(){this.v(),this.children.map((t=>t.p()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this.p()}set y(t){this.position.y=t,this.p()}get width(){return this._}set width(t){this._=t,this.p()}get height(){return this.S}set height(t){this.S=t,this.p()}v(){if(!this.k)return;let{P:t=0,B:e=0}=this.parent||{};this.P=this.x,this.B=this.y,this.D=this.width,this.A=this.height,this.P+=t,this.B+=e}get C(){return{x:this.P,y:this.B,width:this.D,height:this.A}}set children(t){this.removeChild(this.M),this.$(t)}get children(){return this.M}$(...t){t.flat().map((t=>{this.children.push(t),t.parent=this,t.p=t.p||i,t.p()}))}removeChild(...t){t.flat().map((t=>{(function(t,e){let i=t.indexOf(e);if(-1!=i)return t.splice(i,1),!0})(this.children,t)&&(t.parent=null,t.p())}))}}function x(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}let f="#8a5",y="#794",m="#b75",g="#dee",w="#abb",b="#f80",M="#000",k="#443",v="#e31",$="#0001",T="#0001",L="#0002",_="#f002",z=t=>document.createElementNS("http://www.w3.org/2000/svg",t),S=(t="div")=>document.createElement(t),P=S();P.style.overflow="hidden",P.style.position="absolute",P.style.width="100vw",P.style.height="100vh",P.style.backgroundColor=f,P.style.display="grid",P.style.placeItems="center",document.body.append(P);let B=S();B.style.position="absolute",B.style.width="100vw",B.style.height="100vh",B.style.background=`repeating-linear-gradient(-55deg,${$} 0 12px,#0000 0 24px)`,B.style.opacity=0,B.style.willChange="opacity",B.style.transition="opacity.3s";let D=S();D.style.position="absolute",D.style.width="100vw",D.style.height="100vh",D.style.background="repeating-linear-gradient(-55deg, currentColor 0 12px,#0000 0 24px)",D.style.color=_,D.style.opacity=0,D.style.willChange="opacity",D.style.transition="opacity.3s",P.append(B,D);let A=z("svg");A.style.position="relative",A.setAttribute("viewBox","0 0 208 112"),A.setAttribute("preserveAspectRatio","xMidYMid slice"),A.style.width="100vw",A.style.height="100vh",A.style.maxHeight="68vw",A.style.maxWidth="200vh",A.style.display="grid",A.style.touchAction="none",P.append(A);let C=z("rect"),j=z("rect");z("rect");let W={j:(()=>{let t=z("rect");t.setAttribute("fill",f),t.setAttribute("width","160.5px"),t.setAttribute("height","80.5px"),t.setAttribute("transform","translate(23.75 15.75)"),A.append(t)})(),W:(()=>{let t=z("g");return A.append(t),t})(),Y:(()=>{let t=z("defs");A.append(t);let e=z("pattern");e.setAttribute("id","grid"),e.setAttribute("width",8),e.setAttribute("height",8),e.setAttribute("patternUnits","userSpaceOnUse"),t.append(e);let i=z("path");i.setAttribute("d","M8 0L0 0 0 8"),i.setAttribute("fill","none"),i.setAttribute("stroke",$),i.setAttribute("stroke-width",1),e.append(i),C.setAttribute("width","160.5px"),C.setAttribute("height","80.5px"),C.setAttribute("transform","translate(23.75 15.75)"),C.setAttribute("fill","url(#grid)"),C.style.opacity=0,C.style.willChange="opacity",C.style.transition="opacity.3s";let s=z("pattern");s.setAttribute("id","gridred"),s.setAttribute("width",8),s.setAttribute("height",8),s.setAttribute("patternUnits","userSpaceOnUse"),t.append(s);let h=z("path");h.setAttribute("d","M8 0L0 0 0 8"),h.setAttribute("fill","none"),h.setAttribute("stroke",_),h.setAttribute("stroke-width",1),s.append(h),j.setAttribute("width","160.5px"),j.setAttribute("height","80.5px"),j.setAttribute("transform","translate(23.75 15.75)"),j.setAttribute("fill","url(#gridred)"),j.style.opacity=0,j.style.willChange="opacity",j.style.transition="opacity.3s",A.append(C,j)})(),q:(()=>{let t=z("g");return t.setAttribute("fill","none"),A.append(t),t})(),baseLayer:(()=>{let t=z("g");return t.id="baseLayer",t.setAttribute("fill",y),A.append(t),t})(),N:(()=>{let t=z("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),t.setAttribute("stroke",y),t.setAttribute("stroke-width",3),A.append(t),t})(),O:(()=>{let t=z("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),t.setAttribute("stroke","#dca"),t.setAttribute("stroke-width",3),A.append(t),t})(),F:(()=>{let t=z("g");return t.setAttribute("opacity",.12),t.setAttribute("transform","translate(.3,.3)"),A.append(t),t})(),Z:(()=>{let t=z("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),t.setAttribute("stroke",M),t.setAttribute("opacity",.2),A.append(t),t})(),U:(()=>{let t=z("g");return t.setAttribute("stroke-linecap","round"),A.append(t),t})(),J:(()=>{let t=z("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),A.append(t),t})(),R:(()=>{let t=z("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),t.setAttribute("stroke",M),t.setAttribute("opacity",.12),t.setAttribute("transform","translate(.5,.5)"),A.append(t),t})(),H:(()=>{let t=z("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","none"),A.append(t),t})(),G:(()=>{let t=z("g");return t.setAttribute("stroke-linecap","round"),t.setAttribute("fill","#fff"),A.append(t),t})(),I:(()=>{let t=z("g");return t.setAttribute("stroke-linecap","round"),A.append(t),t})(),K:(()=>{let t=z("rect");return t.setAttribute("width","160.5px"),t.setAttribute("height","80.5px"),t.setAttribute("transform","translate(23.5 15.5)"),t.setAttribute("fill","none"),t.setAttribute("stroke-width",0),t.style.cursor="cell",t.style.pointerEvents="all",A.append(t),t})()},{U:Y,F:q,baseLayer:N,H:O,R:F,q:Z,Y:E,K:Q,O:U,N:J,J:R,I:H,W:G,Z:I,G:K}=W,V=()=>{Y.innerHTML="",q.innerHTML="",N.innerHTML="",O.innerHTML="",F.innerHTML="",Z.innerHTML="",U.innerHTML="",J.innerHTML="",R.innerHTML="",H.innerHTML="",G.innerHTML="",I.innerHTML="",K.innerHTML=""},X=t=>4+8*t,tt=[],et=[],it=[],st=[],ht=({V:t,X:e})=>{let i=tt;et=[],i.forEach((t=>{i.forEach((e=>{t!=e&&(et.find((i=>i.tt==e&&i.et==t))||t.it||e.it||(t.st[0].x==e.st[0].x&&t.st[0].y==e.st[0].y?et.push({tt:t,et:e,st:[t.st[1],t.st[0],e.st[1]]}):t.st[0].x==e.st[1].x&&t.st[0].y==e.st[1].y?et.push({tt:t,et:e,st:[t.st[1],t.st[0],e.st[0]]}):t.st[1].x==e.st[0].x&&t.st[1].y==e.st[0].y?et.push({tt:t,et:e,st:[t.st[0],t.st[1],e.st[1]]}):t.st[1].x==e.st[1].x&&t.st[1].y==e.st[1].y&&et.push({tt:t,et:e,st:[t.st[0],t.st[1],e.st[0]]})))}))}));let s=[];et.forEach((t=>{let{tt:e,et:i,st:h}=t,r=`M${X(h[0].x)} ${X(h[0].y)}`,a=X(h[0].x+(h[1].x-h[0].x)/2),o=X(h[0].y+(h[1].y-h[0].y)/2),n=`L${a} ${o}`,l=`L${X(h[2].x)} ${X(h[2].y)}`,d=`Q${X(h[1].x)} ${X(h[1].y)} ${X(h[1].x+(h[2].x-h[1].x)/2)} ${X(h[1].y+(h[2].y-h[1].y)/2)}`,p=et.find((t=>h[0].x==t.st[1].x&&h[0].y==t.st[1].y))?`M${a} ${o}`:`${r}${n}`,c=et.find((t=>h[2].x==t.st[1].x&&h[2].y==t.st[1].y))?"":l;s.push({tt:e,et:i,d:`${p}${d}${c}`})})),i.forEach((t=>{if(!et.find((e=>e.tt==t||e.et==t))&&!t.it){let{st:e}=t,i=`${X(e[0].x)} ${X(e[0].y)}`,h=`${X(e[1].x)} ${X(e[1].y)}`;s.push({path:t,d:`M${i}L${h}`,ht:i,rt:h})}})),s.forEach((i=>{var h,r,a,o,n,l,d;if(it.forEach((t=>{let e=i.path&&i.path==t.path,s=i.tt&&i.tt==t.tt,h=i.et&&i.et==t.et;(e||s&&h)&&(i.ot=t.ot,i.nt=t.nt,i.d!=t.d&&(t.d=i.d,i.ot.setAttribute("d",i.d)))})),it.forEach((e=>{s.find((t=>e.d==t.d))||e.path&&(t&&e.path&&e.path.st[0].fixed?setTimeout((()=>{e.ot.remove()}),500):e.ot.remove())})),!i.ot){i.ot=z("path"),i.ot.setAttribute("d",i.d),i.ot.style.transition="all.4s, opacity.2s",((null==(h=i.path)?void 0:h.st[0].lt)||(null==(r=i.path)?void 0:r.st[1].lt)||(null==(a=i.tt)?void 0:a.st[0].lt)||(null==(o=i.tt)?void 0:o.st[1].lt)||(null==(n=i.et)?void 0:n.st[0].lt)||(null==(l=i.et)?void 0:l.st[1].lt))&&(i.ot.style.strokeDasharray="0 3px",i.ot.style.strokeWidth="2px",i.ot.style.stroke="#bbb",i.ot.style.filter=`drop-shadow(.3px .3px ${L})`),U.append(i.ot);let t=i.path&&st.some((t=>t.x==i.path.st[0].x&&t.y==i.path.st[0].y||t.x==i.path.st[1].x&&t.y==i.path.st[1].y)),s=null==(d=i.path)?void 0:d.st[0].fixed;null!=i.path&&t&&!s||(i.ot.setAttribute("stroke-width",0),i.ot.setAttribute("opacity",0),i.ot.style.willChange="stroke-width, opacity",s&&(i.ot.setAttribute("d",`M${i.ht}L${i.ht}`),setTimeout((()=>{i.ot.setAttribute("d",`M${i.ht}L${i.rt}`)}),20)),e||(i.nt=z("path"),i.nt.setAttribute("d",i.d),J.append(i.nt),setTimeout((()=>{var t;null==(t=i.nt)||t.remove(),i.ot.style.willChange=""}),500)),setTimeout((()=>{i.ot.removeAttribute("stroke-width"),i.ot.setAttribute("opacity",1)}),20))}})),it=[...s],st=[]};class rt extends u{constructor(t){let{st:e}=t;super({...t,st:e}),tt.push(this)}remove(){it=it.filter((t=>t.path!=this&&t.tt!=this&&t.et!=this||(t.ot.setAttribute("opacity",0),t.ot.setAttribute("stroke-width",0),setTimeout((()=>{t.ot.remove()}),500),!1))),tt.splice(tt.findIndex((t=>t==this)),1),st.push({x:this.st[0].x,y:this.st[0].y},{x:this.st[1].x,y:this.st[1].y})}}let at={dt:9},ot=(t,e)=>{let i=Q.getBoundingClientRect().width/20;return{x:3+Math.floor(t/i),y:2+Math.floor(e/i)}},nt=(t,e)=>{let i=Q.getBoundingClientRect().width/20;return{x:(3+t)*i,y:(2+e)*i}};class lt extends u{constructor(t){super({...t,width:t.width??1,height:t.height??1}),this.connections=t.connections}remove(){}}let dt=[],pt=({from:t,to:e})=>{let i=dt.find((e=>e.x==t.x&&e.y==t.y)),s=dt.filter((t=>e.find((e=>t.x==e.x&&t.y==e.y))));return((t,e,i)=>{let s=[{node:e,path:[]}],h=[];for(;s.length;){let{node:e,path:r}=s.shift();if(null==e)return!1;if(i.find((t=>e.x==t.x&&e.y==t.y)))return r.concat(e);h.some((t=>t.x==e.x&&t.y==e.y))||(h.push(e),e.ct.forEach((i=>{h.some((t=>t.x==i.x&&t.y==i.y))||s.push({node:t.find((t=>t.x==i.x&&t.y==i.y)),path:r.concat(e)})})))}return null})(dt,i,s)},ct=t=>t.map((t=>({value:t,sort:Math.random()}))).sort(((t,e)=>t.sort-e.sort)).map((({value:t})=>t)),ut=[];class xt extends u{constructor(t){super({...t});let e=2*Math.random()-1,i=2*Math.random()-1;this.ut=this.xt.ut,this.height=1,this.width=1,this.ft=!0,this.yt=0,this.destination=null,this.x=4+8*this.xt.x+e,this.y=4+8*this.xt.y+i,ut.push(this)}gt(){let{x:t}=this,{y:e}=this,i=z("path");i.setAttribute("d","M0 0 0 0"),i.setAttribute("transform",`translate(${t},${e})`),i.setAttribute("stroke",this.ut),R.append(i),this.ot=i;let s=z("path");s.setAttribute("stroke-width",1.2),s.setAttribute("d","M0 0 .3 .3"),s.setAttribute("transform",`translate(${t},${e})`),I.append(s),this.wt=s}m(){if(!this.ot)return;let{x:t}=this,{y:e}=this;this.ot.setAttribute("transform",`translate(${t},${e})`),this.wt.setAttribute("transform",`translate(${t},${e})`)}update(){var t,e;if(this.advance(),(this.ft||this.yt)&&(this.dx*=.9,this.dy*=.9),this.yt&&(this.yt++,2==this.yt&&this.bt.ut==b&&ct(this.bt.children).forEach(((t,e)=>setTimeout((()=>t.Mt.style.fill=b),250*e))),this.yt>80&&this.kt.length>3||this.yt>120&&this.kt.length>2||this.yt>160)){this.bt.ut==b&&ct(this.bt.children).forEach(((t,e)=>setTimeout((()=>t.Mt.style.fill=L),1e3+1e3*e)));let t=pt({from:{x:this.destination.x,y:this.destination.y},to:[{x:this.xt.x,y:this.xt.y}]});(null==t?void 0:t.length)?(this.vt=!0,this.yt=0,this.$t=!0,this.destination=t.at(-1),this.Tt=t,this.kt=[...t]):this.yt=40*Math.random()+40}if(this.$t&&this.destination&&(null==(t=this.Tt)?void 0:t.length)){let t=2*Math.random()-1,e=2*Math.random()-1,i=new p(4+8*this.Tt[0].x+t,4+8*this.Tt[0].y+e),s=2,h=1;if(3>this.kt.length&&(this.dx*=.9,this.dy*=.9),1==this.Tt.length){if(Math.abs(this.x-i.x)<h&&Math.abs(this.y-i.y)<h)return this.vt?(this.vt=!1,this.ft=!0):(this.yt=1,this.bt.Lt-=this.bt._t,this.bt.zt.splice(this.bt.zt.indexOf(this),1)),void(this.$t=!1)}else if(Math.abs(this.x-i.x)<s&&Math.abs(this.y-i.y)<s)return void this.Tt.shift();for(;this.o.length()>.1;)this.dx*=.98,this.dy*=.98;let r=.006,a=.01,o=this.position.t(i).normalize();this.x<i.x+r&&(this.dx-=o.x*a),this.x>i.x-r&&(this.dx-=o.x*a),this.y<i.y+r&&(this.dy-=o.y*a),this.y>i.y-r&&(this.dy-=o.y*a)}(null==(e=this.Tt)?void 0:e.length)>0&&ut.filter((t=>t!=this&&!t.ft)).forEach((t=>{let e=t.position.h(this.position),i=t.position.h(this.position.add(this.o));if(e>i&&1.5>i){let e=this.position.t(t.position).normalize(),i=(h=Math.PI/2,new p({x:(s=e).x*Math.cos(h)-1*s.y,y:1*s.x-s.y*Math.cos(h)})).scale(.1);this.o.set(((t,e)=>{let i=t.length(),s=t.add(e),h=s.length();return s.scale(i/h)})(this.o,i))}var s,h;let r=t.position.h(this.position.add(this.o));6>i&&this.o.length()>.06&&(e>r?1.5>i?(this.dx*=.86,this.dy*=.86):(this.dx*=.89,this.dy*=.89):(this.dx*=.9,this.dy*=.9))}))}}let ft=[];class yt extends lt{constructor(t){let{x:e,y:i}=t;super(t),this.st=[{x:this.x,y:this.y}],setTimeout((()=>{this.St=new rt({st:[{x:e,y:i,fixed:!0},{x:e+this.Pt.x,y:i+this.Pt.y}]}),ht({Bt:[{x:e,y:i,fixed:!0},{x:e+this.Pt.x,y:i+this.Pt.y}],X:!0})}),1e3),setTimeout((()=>{this.children.push(new xt({x:this.x,y:this.y,xt:this})),this.children.push(new xt({x:this.x,y:this.y,xt:this})),this.children.forEach((t=>t.gt()))}),2e3),ft.push(this),this.gt()}Dt(t,e){this.Pt={x:t-this.x,y:e-this.y},it.filter((t=>t.path==this.St||t.tt==this.St||t.et==this.St)).forEach((t=>{t.ot.setAttribute("stroke-width",0),t.ot.setAttribute("opacity",0),setTimeout((()=>{t.ot.remove()}),500)})),this.St&&(this.At=this.St,this.At.it=!0),this.St=new rt({st:[{x:this.x,y:this.y,fixed:!0},{x:t,y:e}]}),ht({Bt:[{x:this.x,y:this.y,fixed:!0},{x:t,y:e}],V:!0}),setTimeout((()=>{var t;null==(t=this.At)||t.remove()}),400)}gt(){let t=4+8*this.x,e=4+8*this.y,i=z("circle");i.setAttribute("fill",T),i.setAttribute("r",0),i.setAttribute("stroke","none"),i.setAttribute("transform",`translate(${t},${e})`),i.style.willChange="r, opacity",i.style.opacity=0,i.style.transition="all.4s",N.append(i),setTimeout((()=>{i.setAttribute("r",3),i.style.opacity=1}),100),setTimeout((()=>i.style.willChange=""),600),this.Ct=z("g"),this.Ct.style.transform=`translate(${t}px,${e}px)`,K.append(this.Ct),this.jt=z("circle"),this.jt.style.transition="r.4s",this.jt.style.willChange="r",setTimeout((()=>this.jt.setAttribute("r",3)),400),setTimeout((()=>this.jt.style.willChange=""),900),this.Wt=z("path"),this.Wt.setAttribute("d","M0 0 0 0"),this.Wt.setAttribute("stroke-width",6),this.Wt.style.transform=`translate(${t}px,${e}px)`,this.Wt.style.opacity=0,this.Wt.style.willChange="d",this.Wt.style.transition="d.6s",I.append(this.Wt),setTimeout((()=>this.Wt.style.opacity=.8),800),setTimeout((()=>this.Wt.setAttribute("d","M0 0 2 2")),900),setTimeout((()=>this.Wt.style.willChange=""),1600),this.Yt=z("circle"),this.Yt.setAttribute("fill","none"),this.Yt.setAttribute("r",1),this.Yt.setAttribute("stroke-dasharray",6.3),this.Yt.setAttribute("stroke-dashoffset",6.3),this.Yt.setAttribute("stroke",this.ut),this.Yt.style.willChange="stroke-dashoffset",this.Yt.style.transition="stroke-dashoffset .5s",this.Ct.append(this.jt,this.Yt),setTimeout((()=>this.Yt.setAttribute("stroke-dashoffset",0)),700),setTimeout((()=>this.Yt.style.willChange=""),1300)}qt(){let t=4+8*this.x,e=4+8*this.y;this.Wt.style.transition="transform.2s d.3s",this.Wt.setAttribute("d","M0 0 3 3"),this.Ct.style.transition="transform.2s",this.Ct.style.transform=`translate(${t}px,${e}px)scale(1.1)`}Nt(){let t=4+8*this.x,e=4+8*this.y;this.Wt.style.transition="transform.3s d.4s",this.Wt.setAttribute("d","M0 0 2 2"),this.Wt.style.transform=`translate(${t}px,${e}px)scale(1)`,this.Ct.style.transition="transform.3s",this.Ct.style.transform=`translate(${t}px,${e}px)scale(1)`}}let mt=()=>{let t=z("svg");t.setAttribute("viewBox","0 0 16 16"),t.setAttribute("stroke-linecap","round");let e=z("path");e.setAttribute("fill",m),e.setAttribute("d","M15 2h-4c-1 0-5 0-6 2l-2 5c-1 2 0 5 2 5h4 l2 2z");let i=z("path");i.setAttribute("fill",g),i.setAttribute("d","M12 3c-2 2-5-1-7-1s-3-.5-3-1c0-.5 2-1 4-1s8 1 6 3z");let s=z("circle");return s.setAttribute("cx",8),s.setAttribute("cy",6),s.setAttribute("r",1),s.setAttribute("fill",k),t.append(e,i,s),t},gt=()=>{let t=z("svg");t.setAttribute("viewBox","0 0 20 20"),t.setAttribute("stroke-linecap","round"),t.style.width="48px",t.style.height="48px";let e=z("path");e.setAttribute("fill",w),e.setAttribute("d","M18 12c-2-3-4-8-7-8-4 0-10 5-10 9 0 3 6 3 8 3l2 4z");let i=z("path");i.setAttribute("fill","#bcc"),i.setAttribute("d","M7.4 7.5c-1-4 3.7-6 8-4 1 .4 1 1.3 0 1-3-1-6 1-4 4 1.1 1.7-3.2 2-4-1z");let s=z("path");s.setAttribute("fill","#cdd"),s.setAttribute("d","M6 5.8c-1-4 3.7-6 8-4 1 .4 1 1.3 0 1-3-1-6 1-4 4 1.1 1.6-3.2 2-4-1z");let h=z("path");h.setAttribute("fill","#cdd"),h.setAttribute("d","M6 15c0 4-2 5-2 4 0-2-1 0-1-1v-3z");let r=z("circle");return r.setAttribute("cx",7),r.setAttribute("cy",9.3),r.setAttribute("r",1),r.setAttribute("fill",k),t.append(i,s,h,e,r),t},wt=()=>{let t=z("svg");t.setAttribute("viewBox","0 0 20 20"),t.setAttribute("stroke-linecap","round");let e=z("path");e.setAttribute("fill",b),e.setAttribute("d","m17 11 1-4c1-4-5 0-5 4s6 8 5 4zM4 6.5c0-2 2-4 2-4 4 0 7 4 8 8m-11 4c4 2 14 6 6-2");let i=z("path");i.setAttribute("fill",b),i.setAttribute("d","m0 11c0 10 16 4 16 0s-16-12-16 0");let s=z("circle");return s.setAttribute("cx",4),s.setAttribute("cy",9),s.setAttribute("r",1),s.setAttribute("fill",k),t.append(i,e,s),t},bt=S(),Mt=S(),kt=S(),vt=S(),$t=S(),Tt=S(),Lt=S(),_t=S(),zt=S(),St=S(),Pt=S(),Bt=S(),Dt=S("button"),At=z("path"),Ct=z("path"),jt=S("button"),Wt=z("svg"),Yt=z("path"),qt=S("button"),Nt=z("svg"),Ot=z("path"),Ft=(t,e)=>{tt.filter((i=>(i.st[0].x==t&&i.st[0].y==e||i.st[1].x==t&&i.st[1].y==e)&&!i.st[0].fixed&&!i.st[1].fixed)).forEach((t=>{99>at.dt&&(at.dt++,Bt.innerText=at.dt),t.remove()})),ht({Bt:[{x:t,y:e}]})};function Zt(t,e,i){let s=(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y);return 0==s?0:s>0?1:2}let Et=[],Qt=(t,e)=>{let i=[];for(let s=-e/2+.5;e/2-.5>=s;s++)for(let e=-t/2+.5;t/2-.5>=e;e++)t/2-Math.abs(e)+2*Math.random()-1>Math.abs(s)&&i.push({x:Math.floor(e),y:Math.floor(s)});return i.length>2?i:Qt(t,e)},Ut=({width:t,height:e,x:i,y:s})=>{let h=Qt(t,e),r=[];h=h.map((h=>({x:i+h.x+Math.floor(t/2),y:s+h.y+Math.floor(e/2)})));for(let p=0;e>p;p++)for(let e=0;t>e;e++)r.push({x:i+e,y:s+p});Et.push({width:t,height:e,x:i,y:s,st:h,Ot:r});let a=(t=>{let e=0;for(let h=1;h<t.length;h++)(t[h].y<t[e].y||t[h].y==t[e].y&&t[h].x<t[e].x)&&(e=h);let i=[],s=e;do{i.push(t[s]);let e=(s+1)%t.length;for(let i=0;i<t.length;i++)2==Zt(t[s],t[i],t[e])&&(e=i);s=e}while(s!=e);s=e;do{let h=(s-1+t.length)%t.length;for(let e=0;e<t.length;e++)2==Zt(t[s],t[e],t[h])&&(h=e);s=h,s!=e&&i.push(t[s])}while(s!=e);return i})(h),o=z("path");o.setAttribute("fill","#69b");let n=a.reduce(((t,e,i)=>{let s=a.at((i+1)%a.length),h=e.x+(s.x-e.x)/2,r=e.y+(s.y-e.y)/2;return`${t} ${4+8*e.x} ${4+8*e.y} ${4+8*h} ${4+8*r}`}),`M${4+8*(a[0].x+(a.at(-1).x-a[0].x)/2)} ${4+8*(a[0].y+(a.at(-1).y-a[0].y)/2)}Q`);o.setAttribute("d",n+"Z"),o.setAttribute("stroke-width",4),o.setAttribute("stroke-linejoin","round"),o.setAttribute("stroke","#6ab");let l=z("path");l.setAttribute("fill","#7bc"),l.setAttribute("d",n+"Z"),l.setAttribute("stroke","#7bc"),l.style.filter="blur(2px)";let d=z("path");d.setAttribute("d",n+"Z"),d.setAttribute("stroke-width",6),d.setAttribute("stroke","#9b6"),G.append(d,o,l)},Jt=!1,Rt={locked:!1,Ft:!1},Ht=()=>{B.style.opacity=.9,C.style.opacity=1,Jt||(Yt.setAttribute("d","M8 4.5 5 11M8 4.5 11 11M5 11 8 4.5 11 11M6 9.5 10 9.5"),Yt.style.transform="rotate(0)")},Gt=()=>{Jt||(B.style.opacity=0,C.style.opacity=0,Yt.setAttribute("d","M6 5 6 11M10 5 10 11M5 6 8 6 11 6M5 10 11 10"),Yt.style.transform="rotate(180deg)")},It=()=>{Q.style.cursor="crosshair",j.style.opacity=.9,D.style.opacity=.9,Rt.locked||(Ot.setAttribute("d","M8 4.5 5 11M8 4.5 11 11M5 11 8 4.5 8 4.5 11 11M6 9.5 10 9.5"),Ot.style.transform="rotate(0)")},Kt=()=>{Rt.locked||(j.style.opacity=0,D.style.opacity=0,Ot.setAttribute("d","M9 7 7 9M7 7 9 9M4.5 11.5 4.5 4.5 11.5 4.5 11.5 11.5M4.5 11.5 11.5 11.5"),Ot.style.transform="rotate(180deg)")},Vt={},Xt=!1,te=(t,e)=>ft.find((i=>i.x==t&&i.y==e)),ee=(t,e)=>Et.find((i=>i.st.find((i=>i.x==t&&i.y==e)))),ie=(t,e)=>tt.find((i=>i.st[1].x==t&&i.st[1].y==e&&i.st[1].lt)),se=(t,e,i,s)=>tt.find((h=>h.st[0].x==t&&h.st[0].y==e&&h.st[1].x==i&&h.st[1].y==s||h.st[1].x==t&&h.st[1].y==e&&h.st[0].x==i&&h.st[0].y==s)),he=t=>4+8*t,re=z("g"),ae=z("path");ae.style.opacity=0,ae.style.scale=0,ae.style.transition="all.2s, scale.4s cubic-bezier(.5,2,.5,1)",re.append(ae),J.append(re);let oe=[],ne=t=>3+Math.random()*(8*t-6);class le extends u{constructor(t){var e,i;super({...t,anchor:{x:.5,y:.5},x:ne((null==(e=t.xt)?void 0:e.width)??0),y:ne((null==(i=t.xt)?void 0:i.height)??0),rotation:t.rotation??Math.random()*Math.PI*4-2*Math.PI});let s=8*this.xt.x+this.x,h=8*this.xt.y+this.y;this.Zt=t.Zt??!1,this.Et=t.Et,this.Qt=!1,this.Ut=null,this.Jt=z("g"),this.Jt.style.opacity=0,this.Jt.style.willChange="opacity, transform",this.Jt.style.transition="all.8s cubic-bezier(.5,2,.5,1)",this.Jt.style.transformOrigin="bottom",this.Jt.style.transformBox="fill-box",this.Jt.style.transform=`translate(${s}px,${h-this.height/2}px)`,H.append(this.Jt);let r=z("path");r.setAttribute("fill","#fff"),r.setAttribute("d","m6 6-2-2a3 3 0 1 1 4 0Z"),r.setAttribute("transform","scale(.5) translate(-6 -8)"),this.Jt.append(r),this.Rt=z("path"),this.Rt.setAttribute("stroke",this.color),this.Rt.setAttribute("d","M3 6L3 6M3 4.5L3 3"),this.Rt.setAttribute("transform","scale(.5) translate(-3 -10.4)"),this.Rt.style.opacity=0,this.Jt.append(this.Rt),this.Ht=z("path"),this.Ht.setAttribute("fill",this.color),this.Ht.setAttribute("d","M6 6L4 4A1 1 0 1 1 6 2 1 1 0 1 1 8 4Z"),this.Ht.setAttribute("transform","scale(.3) translate(-6 -13)"),this.Ht.style.opacity=0,this.Jt.append(this.Ht),oe.push(this)}m(){let t=8*this.xt.x+this.x,e=8*this.xt.y+this.y;this.Jt.style.transform=`translate(${t}px,${e-this.height/2}px)scale(${this.Qt||this.Gt?1:0})`}It(){return{x:ne(this.xt.width),y:ne(this.xt.height)}}Kt(){this.Gt=!0,this.Jt.style.opacity=1,this.Rt.style.opacity=0,this.Ht.style.opacity=1}Vt(){this.Gt=!1,this.Jt.style.opacity=this.Qt?1:0,this.Rt.style.opacity=this.Qt?1:0,this.Ht.style.opacity=0}Xt(){this.Qt=!0,this.Rt.style.opacity=1,this.Ht.style.opacity=0,this.Jt.style.opacity=1}te(){this.Qt=!1,this.Ht.style.opacity=this.Gt?1:0,this.Jt.style.opacity=this.Gt?1:0,this.Rt.style.opacity=0}ee(t){t?this.Xt():this.te()}}let de=[];class pe extends le{constructor(t){super({...t,xt:t.xt,width:1.5,height:2.5,Et:.6,color:m,Zt:!!t.Zt&&5e3}),de.push(this)}gt(){this.scale=0;let t=z("g");t.style.transformOrigin="center",t.style.transformBox="fill-box",t.style.transition="all 1s",t.style.willChange="transform",this.ot=t,Y.prepend(t);let e=z("rect");e.setAttribute("fill",m),e.setAttribute("width",this.width),e.setAttribute("height",this.height),e.setAttribute("rx",this.Et),t.append(e);let i=z("path");i.setAttribute("fill","none"),i.setAttribute("stroke",g),i.setAttribute("width",this.width),i.setAttribute("height",this.height),i.setAttribute("d","M0 2Q0 1 1 1 Q2 1 2 2"),i.setAttribute("transform","translate(-0.2 .6)"),i.setAttribute("stroke-width",.4),this.Zt&&(i.style.transition="all 1s",i.style.willChange="opacity",i.style.opacity=0),this.ie=i,t.append(i);let s=z("rect");s.setAttribute("width",this.width),s.setAttribute("height",this.height),s.setAttribute("rx",this.Et),s.style.transformOrigin="center",s.style.transformBox="fill-box",s.style.transition="all 1s",s.style.willChange="transform",this.se=s,q.prepend(s),this.m(),Mt.style.width="96px",Mt.style.opacity="1",setTimeout((()=>{this.scale=1,kt.innerText=de.length}),500),setTimeout((()=>{t.style.transition="",t.style.willChange="",s.style.willChange="",s.style.transition=""}),1500)}update(t){if(this.advance(),t&&(1==this.Zt&&(this.ie.style.opacity=1),this.Zt&&this.Zt--),Math.random()>.99&&(this.target=this.It()),this.target){let t=l(this,this.target)-this.rotation,e=p(this.target),i=e.h(this)>1;if(Math.abs(t%(2*Math.PI))>.1)this.rotation+=t>0?.04:-.04;else if(i>.1){let t=e.t(this).normalize(),i=this.x+.05*t.x,s=this.y+.05*t.y;this.xt.children.some((t=>{if(this==t)return!1;let e=p(t),h=e.h({x:this.x,y:this.y}),r=e.h({x:i,y:s});return 4>r&&h>r}))||(this.x=i,this.y=s)}}}m(){super.m();let t=8*this.xt.x+this.x-this.width/2,e=8*this.xt.y+this.y-this.height/2;this.ot.style.transform=`translate(${t}px,${e}px)rotate(${n(this.rotation)-90}deg)scale(${this.scale*(this.Zt?.5:1)})`,this.se.style.transform=`translate(${t}px,${e}px)rotate(${n(this.rotation)-90}deg)scale(${(this.scale+.04)*(this.Zt?.5:1)})`}}let ce=[];class ue extends lt{constructor(t){let{he:e}=t;super(t),this.delay=this.delay??0,this.Lt=0,this.re=0,this.ae=16*this.width+16*this.height,this.oe=0,this.zt=[],this.st=[];for(let i=0;i<this.width;i++)for(let t=0;t<this.height;t++)this.st.push({x:this.x+i,y:this.y+t});setTimeout((()=>{this.St=new rt({st:[{x:this.x+e[0].x,y:this.y+e[0].y,fixed:e[0].fixed,lt:e[0].lt},{x:this.x+e[1].x,y:this.y+e[1].y,fixed:e[1].fixed,lt:e[1].lt}]}),ht({})}),1500+t.delay),ce.push(this),setTimeout((()=>{this.gt()}),t.delay)}ne(t){this.$(t),t.gt()}le(){let t=this.children.filter((t=>!t.Zt)),e=t.filter((t=>!t.Qt)),i=t.filter((t=>t.Qt));this.Qt?this.oe>t.length?this.children.forEach((t=>t.te())):this.te():(this.ee(this.oe>t.length),i.length&&this.oe<i.length&&i[Math.floor(Math.random()*i.length)].te(),e.length&&this.oe>t.length-e.length&&e[Math.floor(Math.random()*e.length)].Xt())}update(t,e){if(!this.de){t&&(this.oe=Math.floor(this.Lt/this._t),this.Lt+=this.children.length-1+e*e/1e9,this.Qt&&this.pe(),this.le()),this.children.forEach((e=>e.update(t)));for(let t=0;t<this.oe;t++){if(this.zt.length>=this.oe)return;let t=ut.filter((t=>t.ft&&t.ut==this.ut));if(0==t.length)return;let e=t[0],i=null;for(let s=0;s<t.length;s++){let h=pt({from:{x:t[s].xt.x,y:t[s].xt.y},to:this.st});(!i||h&&h.length<i.length)&&(i=h,e=t[s])}i&&(e.destination=i.at(-1),e.$t=!0,e.Tt=i,e.kt=[...i],e.ft=!1,this.zt.push(e),e.bt=this)}}}m(){this.children.forEach((t=>t.m()))}gt(){let t=.75+8*this.x,e=.75+8*this.y,i=8*this.width-1-.5,s=8*this.height-1-.5;if(this.ut!=b){let h=z("rect");h.style.width=i,h.style.height=s,h.setAttribute("rx",2),h.setAttribute("transform",`translate(${t},${e})`),h.style.opacity=0,h.style.transition="opacity.8s",h.style.willChange="opacity",h.setAttribute("fill",f),Z.append(h),setTimeout((()=>h.style.opacity=1),1e3),setTimeout((()=>h.style.willChange=""),2e3)}let h=z("rect");h.setAttribute("width",i),h.setAttribute("height",s),h.setAttribute("rx",2),h.setAttribute("transform",`translate(${t},${e})`),h.setAttribute("stroke",this.ce),h.setAttribute("stroke-dasharray",this.ae),h.setAttribute("stroke-dashoffset",this.ae),h.style.transition="all 1s",O.append(h);let r=z("rect");r.setAttribute("width",i),r.setAttribute("height",s),r.setAttribute("rx",2),r.style.transform=`translate(${t-.5}px,${e-.5}px)`,r.style.willChange="stroke-dashoffset, transform",r.setAttribute("stroke-dasharray",this.ae),r.setAttribute("stroke-dashoffset",this.ae),r.style.transition="stroke-dashoffset 1s,transform.5s",F.append(r),setTimeout((()=>{h.setAttribute("stroke-dashoffset",0),r.setAttribute("stroke-dashoffset",0)}),100),setTimeout((()=>{r.style.transform=`translate(${t}px,${e}px)`}),1e3),this.Jt=z("g"),this.Jt.translate=`${t+i/2}px,${e+s/2+1.5}px`,this.Jt.style.willChange="opacity, transform",this.Jt.style.transition="all.8s cubic-bezier(.5,2,.5,1)",this.Jt.style.transformOrigin="bottom",this.Jt.style.transformBox="fill-box",this.Jt.style.opacity=0,this.Jt.style.transform=`translate(${this.Jt.translate})scale(0)`,H.append(this.Jt),this.ue=z("path"),this.ue.setAttribute("fill","#fff"),this.ue.setAttribute("d","m6 6-2-2a3 3 0 1 1 4 0Z"),this.ue.setAttribute("transform","translate(-9 -9) scale(1.5)"),this.Jt.append(this.ue),this.xe=z("circle"),this.xe.setAttribute("fill","none"),this.xe.setAttribute("stroke-width","2"),this.xe.setAttribute("stroke-linecap","square"),this.xe.setAttribute("r",2),this.xe.setAttribute("stroke",k),this.xe.setAttribute("opacity",.2),this.xe.setAttribute("transform","scale(1.2) translate(0 -5.3)"),this.Jt.append(this.xe),this.fe=z("circle"),this.fe.setAttribute("fill","none"),this.fe.setAttribute("stroke-width","2"),this.fe.setAttribute("stroke-linecap","butt"),this.fe.setAttribute("r",2),this.fe.setAttribute("stroke",v),this.fe.style.willChange="stroke-dashoffset",this.fe.style.transition="stroke-dashoffset.5s",this.fe.setAttribute("stroke-dasharray",12.56),this.fe.setAttribute("stroke-dashoffset",12.56),this.fe.style.transition="stroke-dashoffset.3s.1s",this.fe.setAttribute("transform","scale(1.2) translate(0 -5.3) rotate(-90)"),this.Jt.append(this.fe),this.Jt.style.opacity=1}Xt(){this.Qt=!0,this.Jt.style.opacity=1,this.fe.style.transition="stroke-dashoffset.4s.8s",this.Jt.style.transform=`translate(${this.Jt.translate})scale(1)`,this.Jt.style.transition="all.8s cubic-bezier(.5,2,.5,1)",setTimeout((()=>{this.fe.style.transition="stroke-dashoffset.4s"}),1e3)}te(){this.Qt=!1,this.Jt.style.opacity=0,this.fe.style.transition="stroke-dashoffset.3s",this.Jt.style.transform=`translate(${this.Jt.translate})scale(0)`,this.Jt.style.transition="all.8s cubic-bezier(.5,2,.5,1) .4s"}ee(t){t?this.Xt():this.te()}pe(){let t=this.children.filter((t=>!t.Zt)),e=2*t.length,i=this.oe-t.length,s=12.56-12.56/e*i;this.fe.setAttribute("stroke-dashoffset",s),this.ye<i&&(this.Jt.style.transform=`translate(${this.Jt.translate})scale(1.2)`,setTimeout((()=>{this.Jt.style.transform=`translate(${this.Jt.translate})scale(1)`}),200)),this.ye=i,i==e&&(this.u=!1)}}let xe=[];class fe extends ue{constructor(t){super({...t,ce:m}),this._t=225,this.ut=m,xe.push(this),setTimeout((()=>this.ne({})),2e3+t.delay),setTimeout((()=>this.ne({})),3e3+t.delay),setTimeout((()=>this.ne({Zt:(xe.length-1)%2})),4e3+t.delay),this.me=3,this.de=!0,setTimeout((()=>this.de=!1),3e3)}ge(){if(this.me>=5)return!1;this.me+=2;for(let t=0;t<this.children.filter((t=>!t.Zt)).length;t++)setTimeout((()=>this.children.filter((t=>!t.Zt))[t].Kt()),1e3*t),setTimeout((()=>this.children.filter((t=>!t.Zt))[t].Vt()),7e3),t&&setTimeout((()=>this.ne({Zt:!0})),1e3*t+7e3);return!0}ne({Zt:t=!1}){super.ne(new pe({xt:this,Zt:t}))}update(t,e){super.update(t,e)}}let ye=[];class me extends le{constructor(t){super({...t,xt:t.xt,width:1,height:1.5,Et:.6,color:w,Zt:!!t.Zt&&4e3}),ye.push(this)}gt(){this.scale=0;let t=z("g");t.style.transformOrigin="center",t.style.transformBox="fill-box",t.style.transition="all 1s",t.style.willChange="transform",this.ot=t,Y.prepend(t);let e=z("rect");e.setAttribute("fill",w),e.setAttribute("width",this.width),e.setAttribute("height",this.height),e.setAttribute("rx",this.Et),t.append(e);let i=z("rect");i.setAttribute("width",this.width),i.setAttribute("height",this.height),i.setAttribute("rx",this.Et),i.style.transformOrigin="center",i.style.transformBox="fill-box",i.style.transition="all 1s",i.style.willChange="transform",this.se=i,q.prepend(i),this.m(),vt.style.width="96px",vt.style.opacity="1",setTimeout((()=>{this.scale=1,$t.innerText=ye.length}),500),setTimeout((()=>{t.style.transition="",t.style.willChange="",i.style.willChange="",i.style.transition=""}),1500)}update(t){if(this.advance(),t&&this.Zt&&this.Zt--,Math.random()>.96&&(this.target=this.It()),this.target){let t=l(this,this.target)-this.rotation,e=p(this.target),i=e.h(this)>1;if(Math.abs(t%(2*Math.PI))>.1)this.rotation+=t>0?.1:-.1;else if(i>.1){let t=e.t(this).normalize(),i=this.x+.1*t.x,s=this.y+.1*t.y;this.xt.children.some((t=>{if(this==t)return!1;let e=p(t),h=e.h({x:this.x,y:this.y}),r=e.h({x:i,y:s});return 4>r&&h>r}))||(this.x=i,this.y=s)}}}m(){super.m();let t=8*this.xt.x+this.x-this.width/2,e=8*this.xt.y+this.y-this.height/2;this.ot.style.transform=`translate(${t}px,${e}px)rotate(${n(this.rotation)-90}deg)scale(${this.scale*(this.Zt?.6:1)})`,this.se.style.transform=`translate(${t}px,${e}px)rotate(${n(this.rotation)-90}deg)scale(${(this.scale+.04)*(this.Zt?.6:1)})`}}let ge=[];class we extends ue{constructor(t){super({...t,ce:w}),this._t=240,this.ut=w,ge.push(this),setTimeout((()=>this.ne({})),2e3),setTimeout((()=>this.ne({})),3e3),setTimeout((()=>this.ne({Zt:(ge.length-1)%2})),4e3),this.me=3,this.de=!0,setTimeout((()=>this.de=!1),3e3)}ge(){if(this.me+=1,this.me>=7)return!1;for(let t=0;2>t;t++)setTimeout((()=>this.children.filter((t=>!t.Zt))[t].Kt()),1e3*t),setTimeout((()=>this.children.filter((t=>!t.Zt))[t].Vt()),7e3),t&&setTimeout((()=>this.ne({Zt:!0})),1e3*t+7e3);return!0}ne({Zt:t=!1}){super.ne(new me({xt:this,Zt:t}))}update(t,e){super.update(t,e)}}let be=[];class Me extends le{constructor(t){super({...t,xt:t.xt,width:.7,height:1,Et:1,color:b}),be.push(this)}gt(){this.scale=0,this.ot=z("g"),this.ot.style.transformOrigin="center",this.ot.style.transformBox="fill-box",this.ot.style.transition="all 1s",this.ot.style.willChange="transform",Y.append(this.ot),this.Mt=z("rect"),this.Mt.setAttribute("fill",b),this.Mt.setAttribute("width",this.width),this.Mt.setAttribute("height",this.height),this.Mt.setAttribute("rx",this.Et),this.Mt.style.transition="fill.2s",this.ot.append(this.Mt),this.m(),Tt.style.width="96px",Tt.style.opacity="1",setTimeout((()=>{this.scale=1,Lt.innerText=be.length}),500),setTimeout((()=>{this.ot.style.transition="",this.ot.style.willChange=""}),1500),setTimeout((()=>{this.Mt.setAttribute("fill",L)}),4e3)}update(t){if(this.advance(),t&&this.Zt&&this.Zt--,Math.random()>.96&&(this.target=this.It()),this.target){let t=l(this,this.target)-this.rotation,e=p(this.target),i=e.h(this)>1;if(Math.abs(t%(2*Math.PI))>.1)this.rotation+=t>0?.1:-.1;else if(i>.1){let t=e.t(this).normalize(),i=this.x+.1*t.x,s=this.y+.1*t.y;this.xt.children.some((t=>{if(this==t)return!1;let e=p(t),h=e.h({x:this.x,y:this.y}),r=e.h({x:i,y:s});return 4>r&&h>r}))||(this.x=i,this.y=s)}}}m(){super.m();let t=8*this.xt.x+this.x-this.width/2,e=8*this.xt.y+this.y-this.height/2;this.ot.style.transform=`translate(${t}px,${e}px)rotate(${n(this.rotation)-90}deg)scale(${this.scale*(this.Zt?.6:1)})`,this.Qt&&(this.Mt.style.fill=b)}}let ke=[];class ve extends ue{constructor(t){super({...t,ce:"#eee",width:2,height:2}),this._t=1300,this.ut=b,ke.push(this),setTimeout((()=>this.ne({})),2e3+(t.delay??0)),setTimeout((()=>this.ne({})),2500+(t.delay??0)),setTimeout((()=>this.ne({})),3e3+(t.delay??0)),setTimeout((()=>this.ne({})),3500+(t.delay??0)),setTimeout((()=>this.ne({})),4e3+(t.delay??0)),this.me=5,this.de=!0,setTimeout((()=>this.de=!1),3e3)}ge(){if(this.me>=9)return!1;this.me+=4;for(let t=0;2>t;t++)setTimeout((()=>this.children[t].Kt()),1e3*t),setTimeout((()=>this.children[t].Vt()),7e3);for(let t=0;4>t;t++)setTimeout((()=>this.ne({})),1e3*t+7e3);return!0}ne({Zt:t=!1}){super.ne(new Me({xt:this,Zt:t}))}update(t,e){super.update(t,e)}}let $e=[m,w],Te=3e3,Le=()=>{if(ce.length<$e.length)return $e[ce.length];let t=$e.filter((t=>{let e=ft.filter((e=>e.ut==t)),i=ce.filter((e=>e.ut==t));return e.length>i.length}));return t.at(Math.random()*t.length)},_e=()=>{if(ce.length<$e.length)return $e[ce.length-1];let t={};ft.filter((t=>t.ut!=b)).forEach((e=>{t[e.ut]=t[e.ut]?t[e.ut]+1:1}));let e={};ce.filter((t=>t.ut!=b)).forEach((t=>{e[t.ut]=e[t.ut]?e[t.ut]+1:1}));let i=[];Object.keys(e).forEach((s=>{i.push(e[s]/t[s])}));let s=Object.keys(e)[(t=>{let e=t.reduce(((t,e)=>t+e),0),i=Math.random()*e,s=0;for(let h=0;h<t.length;h++)if(s+=t[h],s>i)return h;return null})(i)];return s},ze=({width:t=1,height:e=1,anchor:i={x:13,y:7,width:0,height:0},we:s=0,maxDistance:h=99,be:r=9,Me:a={x:0,y:0}})=>{let o=0;for(;r>o;){o++;let r=Math.max(3,i.x-h),n=Math.min(23-t+1,i.x+i.width+h-t+1),l=Math.max(2,i.y-h),d=Math.min(12-e+1,i.y+i.height+h-e+1),p=Math.floor(r+Math.random()*(n-r)),c=Math.floor(l+Math.random()*(d-l));if(p<i.x+i.width+s-1&&p>i.x-s-t+1&&c<i.y+i.height+s-1&&c>i.y-s-e+1)continue;if(3>p+a.x||p+a.x>22||2>c+a.y||c+a.y>11)continue;if(Et.some((i=>i.Ot.some((i=>{for(let s=0;t>s;s++)for(let t=0;e>t;t++)if(p+s==i.x&&c+t==i.y)return!0;return!1})))))continue;if(ce.some((i=>i.st.some((i=>{for(let s=0;t>s;s++)for(let t=0;e>t;t++)if(p+s==i.x&&c+t==i.y)return!0;return!1})))))continue;let u=t=>t.x==p+a.x&&t.y==c+a.y;if(!ce.some((t=>t.st.some(u)))&&!tt.some((i=>{for(let s=0;t>s;s++)for(let t=0;e>t;t++)if(p+s==i.st[0].x&&c+t==i.st[0].y||p+s==i.st[1].x&&c+t==i.st[1].y)return!0;return p+a.x==i.st[0].x&&c+a.y==i.st[0].y||p+a.x==i.st[1].x&&c+a.y==i.st[1].y})))return{x:p,y:c}}return null},Se=()=>{let t=Math.random()>.5,e=t?{w:2,ke:3}:{w:3,ke:2},i=Math.floor(Math.random()*e.w),s=Math.floor(Math.random()*e.ke);return{width:e.w,height:e.ke,he:[{x:i,y:s},{x:t?3*i-1:i,y:t?s:3*s-1}]}},Pe=()=>{let t,e=Math.random();return t=.25>e?{x:0,y:-1}:.5>e?{x:1,y:0}:.75>e?{x:0,y:1}:{x:-1,y:0},{Pt:t}},Be=0,De=0,Ae=0,Ce=0,je={ve:!1},We=(t,e)=>{let i=!1;if(t%Te==0&&(Be=Math.floor(200*Math.random()),De=Math.floor(200*Math.random()),Ae=Math.floor(200*Math.random()),Ce=Math.floor(200*Math.random())),0==t)if(Math.random()>.5){let t=6,e=4,i=ze({width:t,height:e,we:5,be:32});i&&Ut({width:t,height:e,x:i.x,y:i.y})}else{let t=ze({width:4,height:4,we:5,be:16});t&&Ut({width:4,height:4,x:t.x,y:t.y});let e=ze({width:3,height:2,we:5,be:16});e&&Ut({width:3,height:2,x:e.x,y:e.y});let i=ze({width:3,height:2,we:5,be:16});i&&Ut({width:3,height:2,x:i.x,y:i.y})}if(0==t||t>1e3&&t%Te==0+(ce.length?Be:0))if(t>1e4&&!ke.length){let t=Et.find((t=>t.width>=4&&t.height>=4)),e=13>t.x?1:0,i=13>t.x?2:-1,s=13>t.x?3:-2,h=7>t.y?1:0,r=t.x+t.width/2-1,a=t.y+t.height/2-1;new ve({x:r,y:a,he:[{x:e,y:h,fixed:!0,lt:!0},{x:t.width>4?s:i,y:h,fixed:!0,lt:!0}]})}else{let{width:t,height:s,he:h}=Se(),r=Le(),a=ze({width:t,height:s,anchor:ce.length>1?ft.filter((t=>t.ut==r)).at(Math.random()*ft.length):ce[ce.length-1],maxDistance:ce.length+2,we:ce.length?2:0,be:32,Me:{x:h[1].x,y:h[1].y}});if(!a){let t=ct(ce);for(let e=0;e<t.length&&!i;e++)t[e].ge()&&(i=!0);return}if(r==m)return void new fe({width:t,height:s,x:a.x,y:a.y,he:h,delay:e});if(r==w)return void new we({width:t,height:s,x:a.x,y:a.y,he:h,delay:e})}if(t%Te!=500+De)if(t%Te==600+De&&je.ve){let{Pt:t}=Pe(),e=ce.filter((t=>t.ut==b)).length&&2>ft.filter((t=>t.ut==b)).length?ce.find((t=>t.ut==b)):ce.length>2?ce.at(Math.random()*ce.length):ce[ce.length-1],i=ze({anchor:{x:e.x,y:e.y,width:e.width,height:e.height},we:3,maxDistance:2+ce.length,Me:t});i?(new yt({x:i.x,y:i.y,ut:e.ut,Pt:t}),je.ve=!1):je.ve=!0}else if(t%Te==700+De&&je.ve){let{Pt:t}=Pe(),e=ce.filter((t=>t.ut==b)).length&&2>ft.filter((t=>t.ut==b)).length?ce.find((t=>t.ut==b)):ce.length>2?ce.at(Math.random()*ce.length):ce[ce.length-1],i=ze({anchor:{x:e.x,y:e.y,width:e.width,height:e.height},we:3,maxDistance:2+ce.length,Me:t});i?(new yt({x:i.x,y:i.y,ut:e.ut,Pt:t}),je.ve=!1):je.ve=!0}else if(t%Te!=1500+Ae){if(t%Te==1600+Ae&&je.ve){let{Pt:t}=Pe(),e=_e(),i=ft.filter((t=>t.ut==e)),s=i.at(Math.random()*i.length),h=ze({anchor:{x:s.x,y:s.y,width:1,height:1},we:1,maxDistance:ce.length,Me:t});h?(new yt({x:h.x,y:h.y,ut:e,Pt:t}),je.ve=!1):je.ve=!0}else if(t%Te==1700+Ae&&je.ve){let{Pt:t}=Pe(),e=_e(),i=ft.filter((t=>t.ut==e)),s=i.at(Math.random()*i.length),h=ze({anchor:{x:s.x,y:s.y,width:1,height:1},we:1,maxDistance:ce.length,Me:t});h?(new yt({x:h.x,y:h.y,ut:e,Pt:t}),je.ve=!1):je.ve=!0}else if(t%Te==2500+Ce&&t>2e4){let{width:t,height:s,he:h}=Se(),r=Le(),a=ze({width:t,height:s,anchor:ce.length>1?ft.filter((t=>t.ut==r)).at(Math.random()*ft.length):ce[ce.length-1],maxDistance:ce.length+2,we:ce.length?2:0,Me:{x:h[1].x,y:h[1].y}});if(!a){let t=ct(ce);for(let e=0;e<t.length&&!i;e++)t[e].ge()&&(i=!0);return}if(r==m)return void new fe({width:t,height:s,x:a.x,y:a.y,he:h,delay:e});if(r==w)return void new we({width:t,height:s,x:a.x,y:a.y,he:h,delay:e})}}else{let{Pt:t}=Pe(),e=_e(),i=ft.filter((t=>t.ut==e)),s=i.at(Math.random()*i.length),h=ze({anchor:{x:s.x,y:s.y,width:1,height:1},we:1,maxDistance:ce.length,Me:t});h?(new yt({x:h.x,y:h.y,ut:e,Pt:t}),je.ve=!1):je.ve=!0}else{let{Pt:t}=Pe(),e=ce.filter((t=>t.ut==b)).length&&2>ft.filter((t=>t.ut==b)).length?ce.find((t=>t.ut==b)):ce.length>2?ce.at(Math.random()*ce.length):ce[ce.length-1],i=ze({anchor:{x:e.x,y:e.y,width:e.width,height:e.height},we:3,maxDistance:2+ce.length,Me:t});i?(new yt({x:i.x,y:i.y,ut:e.ut,Pt:t}),je.ve=!1):je.ve=!0}},Ye=S();Ye.style.cssText="backdrop-filter:blur(8px);position:absolute;inset:0;pointer-events:none;background:#fffb;";let qe=S(),Ne=S(),Oe=S(),Fe=S(),Ze=S(),Ee=S(),Qe=S(),Ue=S("button"),Je=S(),Re=S("button"),He=S(),Ge=mt(),Ie=S(),Ke=gt(),Ve=S(),Xe=wt(),ti=S(),ei=()=>{jt.style.transition="all.2s,opacity 1s 2s",qe.style.transition="opacity 1s 2s",Ye.style.transition="opacity 1s 1s",Ne.style.transition="opacity.3s.6s",Oe.style.transition="opacity.3s.5s",Fe.style.transition="opacity.3s.4s",Ze.style.transition="opacity.3s.3s",Qe.style.transition="opacity.3s.2s",Je.style.transition="opacity.3s.1s",jt.style.opacity=1,qe.style.pointerEvents="none",qe.style.opacity=0,Ye.style.opacity=0,Ne.style.opacity=0,Oe.style.opacity=0,Fe.style.opacity=0,Ze.style.opacity=0,Qe.style.opacity=0,Je.style.opacity=0},ii=S(),si=S(),hi=S(),ri=S(),ai=S(),oi=S("button"),ni=S(),li=S("button"),di=(t,e)=>{ii.style.pointerEvents="",Ye.style.clipPath="polygon(0 0, calc(20dvw + 400px) 0, calc(20dvw + 350px) 100%, 0 100%)",Ye.style.transition="clip-path 1s, opacity 2s",si.style.transition="opacity .5s 1s",ni.style.transition="opacity .5s 1.2s",ai.style.transition="opacity .5s 1.4s",hi.style.transition="opacity .5s 1.6s",e&&(Ye.style.transition="opacity 0s",si.style.transition="opacity .5s .4s",ni.style.transition="opacity .5s .6s",ai.style.transition="opacity .5s .8s",hi.style.transition="opacity .5s 1s"),localStorage.getItem("Tiny Yurts")&&(hi.innerText="Highscore: "+localStorage.getItem("Tiny Yurts"));let i=nt(t.x-13-3+t.width/2,t.y-7-2+t.height/2),s=window.innerWidth/4;A.style.transition="",A.style.transform=`translate(${s}px,0)rotate(-17deg)scale(2)translate(${-i.x}px,${-i.y}px)`,bt.style.zIndex=1,Ye.style.opacity=1,si.style.opacity=1,hi.style.opacity=1,ai.style.opacity=1,ni.style.opacity=1},pi=0,ci=0,ui=0,xi=!1;var fi,yi,mi;(()=>{let t=S("style");t.innerText=`body{position:relative;font-family:system-ui;font-weight:700;color:#443;margin:0;width:100vw;height:100vh;user-select:none}button{font-weight:700;font-family:system-ui;border:none;padding:0 20px;font-size:32px;height:56px;border-radius:48px;background:#fff;box-shadow:0 0 0 1px ${T};transition:all.2s,bottom .5s,right .5s,opacity 1s}button:hover{box-shadow:4px 4px 0 1px ${T}}button:active{box-shadow:0 0 0 1px ${T};transform:scale(.95)}`,document.head.append(t),bt.style.cssText="position:absolute;inset:0;display:grid;overflow:hidden;pointer-events:none",bt.style.zIndex=1,document.body.append(bt),_t.style.cssText="display:flex;position:absolute;top:16px;left:16px;",_t.style.transition="opacity 1s",_t.style.opacity=0,Mt.style.cssText="display:flex;align-items:center;gap:8px;transition:width 1s,opacity 1s 1s";let e=mt();Mt.style.width=0,Mt.style.opacity=0,e.style.width="48px",e.style.height="48px",Mt.append(e,kt),vt.style.cssText="display:flex;align-items:center;gap:8px;transition:width 1s,opacity 1s 1s";let i=gt();vt.style.width=0,vt.style.opacity=0,i.style.width="48px",i.style.height="48px",vt.append(i,$t),Tt.style.cssText="display:flex;align-items:center;gap:8px;transition:width 1s,opacity 1s 1s";let s=wt();Tt.style.width=0,Tt.style.opacity=0,s.style.width="48px",s.style.height="48px",Tt.append(s,Lt),_t.append(Mt,vt,Tt),zt.style.cssText="position:absolute;top:16px;right:16px;display:grid;place-items:center;border-radius:64px;background:"+k,zt.style.width="80px",zt.style.height="80px",zt.style.opacity=0,zt.style.transition="opacity 1s";let h=z("svg");h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-linecap","round"),h.setAttribute("viewBox","0 0 16 16"),h.style.width="80px",h.style.height="80px";for(let n=75;350>n;n+=25){let t=z("path");t.setAttribute("fill","none"),t.setAttribute("stroke","#eee"),t.setAttribute("transform-origin","center"),t.setAttribute("d","m8 14.5 0 0"),t.style.transform=`rotate(${n}grad)`,h.append(t)}Ct.setAttribute("stroke","#eee"),Ct.setAttribute("transform-origin","center"),Ct.setAttribute("d","m8 4 0 4"),h.append(Ct),St.style.cssText="position:absolute;bottom:8px;color:#eee",zt.append(h,St),Pt.style.cssText="position:absolute;display:grid;place-items:center;place-self:center;bottom:20px;border-radius:20px;background:"+k,500>document.body.scrollHeight?Pt.style.left="20px":Pt.style.left="",addEventListener("resize",(()=>{500>document.body.scrollHeight?Pt.style.left="20px":Pt.style.left=""})),Pt.style.transform="rotate(-45deg)",Pt.style.opacity=0,Pt.style.transition="scale.4s cubic-bezier(.5,2,.5,1),opacity 1s",Pt.style.width="72px",Pt.style.height="72px",Bt.style.cssText=`display:grid;place-items:center;position:absolute;border-radius:64px;border:6px solid ${k};transform:translate(28px,28px)rotate(45deg);font-size:20px;background:#eee;transition:all.5s}`,Bt.style.width="28px",Bt.style.height="28px";let r=z("svg");r.setAttribute("viewBox","0 0 18 18"),r.style.width="54px",r.style.height="54px",r.style.transform="rotate(45deg)";let a=z("path");a.setAttribute("fill","none"),a.setAttribute("stroke","#eee"),a.setAttribute("stroke-linecap","round"),a.setAttribute("stroke-width",2),a.setAttribute("d","M11 1h-3q-2 0-2 2t2 2h4q2 0 2 2t-2 2h-6q-2 0-2 2t2 2h4q2 0 2 2t-2 2h-3"),r.append(a),Pt.append(r,Bt);let o=z("svg");o.setAttribute("viewBox","0 0 16 16"),o.setAttribute("width",64),o.setAttribute("height",64),At.setAttribute("fill",k),At.setAttribute("stroke",k),At.setAttribute("stroke-width",2),At.setAttribute("stroke-linecap","round"),At.setAttribute("stroke-linejoin","round"),At.setAttribute("d","M6 6 6 10M10 6 10 8 10 10"),At.style.transition="all.2s",At.style.transformOrigin="center",At.style.transform="rotate(180deg)",o.append(At),Dt.style.cssText="position:absolute;padding:0;pointer-events:all",500>document.body.scrollHeight?(Dt.style.top="108px",Dt.style.right="20px"):(Dt.style.top="24px",Dt.style.right="112px"),addEventListener("resize",(()=>{500>document.body.scrollHeight?(Dt.style.top="108px",Dt.style.right="20px"):(Dt.style.top="24px",Dt.style.right="112px")})),Dt.style.width="64px",Dt.style.height="64px",Dt.style.opacity=0,Dt.append(o),Nt.setAttribute("viewBox","0 0 16 16"),Nt.setAttribute("width",48),Nt.setAttribute("height",48),Ot.setAttribute("fill","none"),Ot.setAttribute("stroke",v),Ot.setAttribute("stroke-width",2),Ot.setAttribute("stroke-linecap","round"),Ot.setAttribute("stroke-linejoin","round"),Ot.setAttribute("d","M9 7 7 9M7 7 9 9M4.5 11.5 4.5 4.5 11.5 4.5 11.5 11.5M4.5 11.5 11.5 11.5"),Ot.style.transition="all.3s",Ot.style.transformOrigin="center",Ot.style.transform="rotate(180deg)",Nt.append(Ot),qt.append(Nt),qt.style.cssText="position:absolute;bottom:16px;right:16px;padding:0;pointer-events:all;",qt.style.width="48px",qt.style.height="48px",qt.style.opacity=0,Wt.setAttribute("viewBox","0 0 16 16"),Wt.setAttribute("width",48),Wt.setAttribute("height",48),Yt.setAttribute("fill","none"),Yt.setAttribute("stroke",k),Yt.setAttribute("stroke-width",2),Yt.setAttribute("stroke-linecap","round"),Yt.setAttribute("stroke-linejoin","round"),Yt.setAttribute("d","M6 5 6 11M10 5 10 11M5 6 8 6 11 6M5 10 11 10"),Yt.style.transition="all.3s",Yt.style.transformOrigin="center",Yt.style.transform="rotate(180deg)",Wt.append(Yt),jt.append(Wt),jt.style.cssText="position:absolute;bottom:16px;right:16px;padding:0;pointer-events:all;",jt.style.width="48px",jt.style.height="48px",bt.append(_t,zt,Dt,Pt,qt,jt)})(),document.body.append(Ye),Ye.style.opacity=0,fi=()=>{A.style.transition="transform 2s",A.style.transform=`rotate(0)scale(2)translate(0,${nt(0,14).y/-2}px)`,Mt.style.width=0,vt.style.width=0,Tt.style.width=0,Mt.style.opacity=0,vt.style.opacity=0,Tt.style.opacity=0,kt.innerText=0,$t.innerText=0,Lt.innerText=0,Dt.style.opacity=0,setTimeout((()=>{ge.length=0,xe.length=0,ut.length=0,ce.length=0,oe.length=0,de.length=0,ye.length=0,be.length=0,ft.length=0,tt.length=0,Et.length=0,pi=1,ui=1,ci=1,at.dt=9,Bt.innerText=at.dt,V(),ei(),A.style.transform="",setTimeout((()=>{We(0),gi.start()}),1e3)}),1e3)},yi=()=>{xi=!1,A.style.transition="transform 2s",A.style.transform=`rotate(0)scale(2)translate(0,${nt(0,14).y/-2}px)`,at.dt=9,Mt.style.width=0,vt.style.width=0,Tt.style.width=0,Mt.style.opacity=0,vt.style.opacity=0,Tt.style.opacity=0,kt.innerText=0,$t.innerText=0,Lt.innerText=0,setTimeout((()=>{ge.length=0,xe.length=0,ut.length=0,ce.length=0,oe.length=0,de.length=0,ye.length=0,be.length=0,ft.length=0,tt.length=0,Et.length=0,pi=0,ci=0,ui=0,V(),ei(),A.style.transform="",Bt.innerText=at.dt,setTimeout((()=>{We(ui,xi),di(ce[0]),gi.start()}),750)}),500)},qe.style.cssText="position:absolute;inset:0;padding:10vmin;display:flex;flex-direction:column",qe.style.pointerEvents="none",qe.style.opacity=0,Ne.style.cssText="font-size:72px;opacity:0",Ne.innerText="Game Over",Oe.style.cssText="margin-top:48px;font-size:24px;opacity:0",Oe.innerText="Too few people could tend to this farm in time.",Fe.style.cssText="margin-top:16px;font-size:24px;opacity:0",Ze.style.cssText="display:flex;gap:4px;margin-top:24px;font-size:24px",Ze.style.opacity=0,500>document.body.scrollHeight?(Ze.style.position="absolute",Ze.style.bottom="10vmin",Ze.style.right="10vmin"):(Ze.style.position="",Ze.style.bottom="",Ze.style.right=""),addEventListener("resize",(()=>{500>document.body.scrollHeight?(Ze.style.position="absolute",Ze.style.bottom="10vmin",Ze.style.right="10vmin"):(Ze.style.position="",Ze.style.bottom="",Ze.style.right="")})),He.style.cssText="display:inline-flex;padding:6px 12px;line-height:24px;color:#fff;border-radius:24px;background:"+k,Ie.style.cssText="display:inline-flex;padding:6px 12px;line-height:24px;color:#fff;border-radius:24px;background:"+k,Ve.style.cssText="display:inline-flex;padding:6px 12px;line-height:24px;color:#fff;border-radius:24px;background:"+k,ti.style.cssText="display:inline-flex;padding:6px 12px;line-height:24px;color:#fff;border-radius:24px;background:"+k,Ge.style.width="24px",Ge.style.height="24px",Ke.style.width="24px",Ke.style.height="24px",Xe.style.width="24px",Xe.style.height="24px",Je.style.opacity=0,Qe.style.opacity=0,Je.append(Re),Qe.append(Ue),Ue.innerText="Restart",Re.innerText="Menu",Ue.addEventListener("click",fi),Re.addEventListener("click",yi),Ee.append(Qe,Je),Ee.style.cssText="gap:16px;margin-top:48px",500>document.body.scrollHeight?(Ee.style.display="flex",Ee.style.position="absolute",Ee.style.bottom="10vmin",Ee.style.left="10vmin"):(Ee.style.display="grid",Ee.style.position="",Ee.style.bottom="",Ee.style.left=""),addEventListener("resize",(()=>{500>document.body.scrollHeight?(Ee.style.display="flex",Ee.style.position="absolute",Ee.style.bottom="10vmin",Ee.style.left="10vmin"):(Ee.style.display="grid",Ee.style.position="",Ee.style.bottom="",Ee.style.left="")})),qe.append(Ne,Oe,Fe,Ze,Ee),document.body.append(qe),function(i,{$e:s=!1}={}){t=document.getElementById(i)||i||document.querySelector("canvas"),s&&(t=t||new Proxy({},a)),e=t.getContext("2d")||new Proxy({},a),e.imageSmoothingEnabled=!1,r("init")}(null,{$e:!0}),P.addEventListener("pointerdown",(()=>{It()})),P.addEventListener("pointermove",(t=>{1==t.buttons&&(It(),Gt())})),P.addEventListener("pointerup",(()=>{Kt()})),P.addEventListener("contextmenu",(t=>t.preventDefault())),Q.addEventListener("pointerdown",(t=>{t.stopPropagation();let e=Q.getBoundingClientRect(),{x:i,y:s}=ot(t.x-e.left,t.y-e.top);if(1!=t.buttons||Rt.locked)(2==t.buttons||Rt.locked)&&(It(),Ft(i,s));else{Ht();let t=ee(i,s),e=ie(i,s);if(t&&!e)return;Xt=!0,Vt={x:i,y:s};let h=te(Vt.x,Vt.y);h?(h.qt(),Q.style.cursor="grabbing"):(ae.setAttribute("d","M0 0 0 0"),re.setAttribute("transform",`translate(${he(i)} ${he(s)})`),ae.style.opacity=1,ae.style.scale=1.3,ae.style.transition="all.2s, scale.4s cubic-bezier(.5,2,.5,1)")}})),Q.addEventListener("pointermove",(t=>{t.stopPropagation();let e=Q.getBoundingClientRect(),{x:i,y:s}=ot(t.x-e.left,t.y-e.top);if(2==t.buttons||1==t.buttons&&Rt.locked)return It(),void Ft(i,s);let h=te(Vt.x,Vt.y),r=te(i,s),a=ee(i,s),o=ie(i,s);if(a&&!o)return void(Q.style.cursor="not-allowed");if(r&&1!=t.buttons?Q.style.cursor="grab":1==t.buttons&&(h&&r||h&&!r)?Q.style.cursor="grabbing":se(Vt.x,Vt.y,i,s)||(Q.style.cursor="cell"),1!=t.buttons)return;if(Kt(),Ht(),!Xt)return;let n=i-Vt.x,l=s-Vt.y,d=new p({x:he(Vt.x),y:he(Vt.y)}),c=`${he(n/2-.5)} ${he(l/2-.5)}`;if(re.setAttribute("transform",`translate(${d.x} ${d.y})`),ae.setAttribute("d","M0 0 "+c),ae.style.opacity=1,ae.style.scale=1.3,0==n&&0==l||Math.abs(n)>1||Math.abs(l)>1)return void ae.setAttribute("d","M0 0 0 0");if(ae.style.transition="all.2s, scale.4s cubic-bezier(.5,2,.5,1)",ae.style.scale=1,!(({Te:t,from:e,to:i})=>{let s=Q.getBoundingClientRect().width/20,h=t.x-s*(e.x-3+.5),r=t.y-s*(e.y-2+.5),a=0>i.y-e.y,o=i.x-e.x>0,n=i.y-e.y>0,l=0>i.x-e.x,d=i.x==e.x,p=i.y==e.y;return a&&d?4-s>r:a&&o?h-r>2*s-4:p&&o?h>s-4:n&&o?h+r>2*s-4:n&&d?r>s-4:n&&l?2*-s+4>h+-r:p&&l?4-s>h:!(!a||!l)&&2*-s+4>h+r})({Te:{x:t.x-e.left,y:t.y-e.top},from:{x:Vt.x,y:Vt.y},to:{x:i,y:s}}))return;if(h&&!r)return h.Dt(i,s),Vt={x:i,y:s},h.Nt(),void(ae.style.transition="");if(r&&!h)return r.Dt(Vt.x,Vt.y),Vt={},Xt=!1,void r.Nt();if(h&&r)return;if(0>=at.dt)return Pt.style.scale=1.1,setTimeout((()=>{Pt.style.scale=1}),300),ae.style.opacity=0,Vt={},void(Xt=!1);if(se(Vt.x,Vt.y,i,s))return void(Q.style.cursor="not-allowed");let u=new rt({st:[{x:Vt.x,y:Vt.y},{x:i,y:s}]});at.dt--,Bt.innerText=at.dt,ht({Bt:[{x:Vt.x,y:Vt.y},{x:i,y:s}],Le:u}),Vt={x:i,y:s},ae.style.transition=""})),Q.addEventListener("pointerup",(t=>{t.stopPropagation();let e=Q.getBoundingClientRect(),{x:i,y:s}=ot(t.x-e.left,t.y-e.top),h=te(Vt.x,Vt.y),r=te(i,s),a=ee(i,s),o=ie(i,s);Q.style.cursor=a&&!o?"not-allowed":r?"grab":"cell",Gt(),Kt(),ae.style.opacity=0,ae.style.scale=0,h&&h.Nt(),Vt={},Xt=!1})),mi=()=>{A.style.transition="transform 2s",A.style.transform="rotate(0) scale(1) translate(0, 0)",Bt.innerText=at.dt,ii.style.pointerEvents="none",bt.style.zIndex="",Ye.style.transition="opacity 1s.6s",si.style.transition="opacity.3s.4s",ni.style.transition="opacity.3s.3s",ai.style.transition="opacity.3s.2s",hi.style.transition="opacity.3s.1s",Ye.style.opacity=0,ni.style.opacity=0,ai.style.opacity=0,ni.style.transition=0,hi.style.opacity=0,si.style.opacity=0,xi=!0,pi=ui=1},ii.style.cssText="position:absolute;inset:0;padding:10vmin;display:flex;flex-direction:column",ii.style.pointerEvents="none",Ye.style.clipPath="polygon(0 0, calc(20dvw + 400px) 0, calc(20dvw + 350px) 100%, 0 100%)",si.style.cssText="font-size:72px;opacity:0;",si.innerText="Tiny Yurts",hi.style.cssText="margin:auto 4px 0;opacity:0",localStorage.getItem("Tiny Yurts")&&(hi.innerText="Highscore: "+localStorage.getItem("Tiny Yurts")),oi.innerText="Start",oi.addEventListener("click",mi),ai.style.opacity=0,li.innerText="Fullscreen",li.addEventListener("click",(()=>{document.fullscreenElement?document.exitFullscreen():(document.documentElement.requestFullscreen(),screen.orientation.lock("landscape"))})),ni.style.opacity=0,ri.style.cssText="display:grid;gap:16px;margin-top:48px",ai.append(oi),ni.append(li),ri.append(ni,ai),ii.append(si,ri,hi),document.body.append(ii),We(ui,2500),di(ce[0],!0);let gi=function({_e:t=60,ze:e=!0,update:s=i,m:a,context:n=o(),blur:l=!1}={}){let d,p,c,u,f,y=0,m=1e3/t,g=1/t,w=e?x:i,b=!0;function M(){if(p=requestAnimationFrame(M),b&&(c=performance.now(),u=c-d,d=c,1e3>=u)){for(r("tick"),y+=u;y>=m;)f.update(g),y-=m;w(f.context),f.m()}}return l||(window.addEventListener("focus",(()=>{b=!0})),window.addEventListener("blur",(()=>{b=!1}))),h("init",(()=>{f.context??(f.context=o())})),f={update:s,m:a,Se:!0,context:n,start(){d=performance.now(),this.Se=!1,requestAnimationFrame(M)},stop(){this.Se=!0,cancelAnimationFrame(p)}},f}({blur:!0,update(){if(xi){if(We(ui,xi),90==ui&&(qt.style.opacity=1,500>document.body.scrollHeight?(qt.style.right="16px",qt.style.bottom="72px"):(qt.style.right="72px",qt.style.bottom="16px"),addEventListener("resize",(()=>{500>document.body.scrollHeight?(qt.style.right="16px",qt.style.bottom="72px"):(qt.style.right="72px",qt.style.bottom="16px")}))),120==ui&&(_t.style.opacity=1),150==ui&&(Pt.style.opacity=1),180==ui&&(zt.style.opacity=1),210==ui&&(Dt.style.opacity=1),ui%8640==0&&99>at.dt){Pt.style.scale=1.1,Bt.innerText="+9",setTimeout((()=>Bt.innerText=at.dt),1300);for(let t=0;9>t;t++)setTimeout((()=>{99>at.dt&&(at.dt++,Bt.innerText=at.dt)}),1300+100*t);setTimeout((()=>{Pt.style.scale=1}),300)}switch(Ct.style.transform=`rotate(${ui/2}deg)`,Math.floor(ui/720%12)){case 0:St.innerText="Jan";break;case 1:St.innerText="Feb";break;case 2:St.innerText="Mar";break;case 3:St.innerText="Apr";break;case 4:St.innerText="May";break;case 5:St.innerText="Jun";break;case 6:St.innerText="Jul";break;case 7:St.innerText="Aug";break;case 8:St.innerText="Sep";break;case 9:St.innerText="Oct";break;case 10:St.innerText="Nov";break;case 11:St.innerText="Dec"}}switch(pi++,ui++,pi%4){case 0:dt=(()=>{let t=[];for(let e=0;26>e;e++)for(let i=0;14>i;i++)t.push({x:e,y:i,ct:[]});return tt.forEach((e=>{t&&(t.find((t=>t.x==e.st[0].x&&t.y==e.st[0].y)).ct.push({x:e.st[1].x,y:e.st[1].y}),t.find((t=>t.x==e.st[1].x&&t.y==e.st[1].y)).ct.push({x:e.st[0].x,y:e.st[0].y}))})),t})();break;case 1:xe.forEach((t=>t.update(xi,ui)));break;case 2:ge.forEach((t=>t.update(xi,ui)));break;case 3:ke.forEach((t=>t.update(xi,ui)))}60>pi||(pi=0),ce.forEach((t=>{if(!t.u){gi.stop();let e=nt(t.x-13-3+t.width/2,t.y-7-2+t.height/2);A.style.transition="transform 2s ease-out .5s",A.style.transform=`rotate(-17deg)scale(2)translate(${-e.x}px,${-e.y}px)`,Mt.style.opacity=0,vt.style.opacity=0,Tt.style.opacity=0,zt.style.opacity=0,Pt.style.opacity=0,Dt.style.opacity=0,qt.style.opacity=0,qt.style.right="",Rt.Ft=!1,Rt.Pe=!1,Kt(),(()=>{let t=2*ft.length+oe.length;bt.style.zIndex="",t>localStorage.getItem("Tiny Yurts")&&localStorage.setItem("Tiny Yurts",t),Ye.style.clipPath="polygon(0 0,100% 0, 100% 100%, 0 100%)",Ye.style.transition="opacity 2s 1s",Ne.style.transition="opacity 1s 2s",Oe.style.transition="opacity 1s 2s",Fe.style.transition="opacity 1s 2s",Ze.style.transition="opacity 1s 2s",Qe.style.transition="opacity 1s 4s",Je.style.transition="opacity 1s 4s",He.innerHTML="",He.append(Ge,"×"+de.length),Ie.innerHTML="",Ie.append(Ke,"×"+ye.length),Ve.innerHTML="",Ve.append(Xe,"×"+be.length),ti.innerHTML="Score:"+t;let e=S("u");e.innerText=2*ft.length+" settlers";let i=S("u");i.innerText=oe.length+" animals",Fe.innerHTML="",Fe.append(e," and ",i," lived in your camp."),Ze.innerHTML="",Ze.append(He," ",Ie," ",Ve," ",ti),jt.style.transition="all.2s",_t.style.opacity=0,jt.style.opacity=0,setTimeout((()=>{qe.style.pointerEvents="",qe.style.opacity=1,Ye.style.opacity=1,Ne.style.opacity=1,Oe.style.opacity=1,Fe.style.opacity=1,Ze.style.opacity=1,Qe.style.opacity=1,Je.style.opacity=1}))})()}})),ut.forEach((t=>t.update()))},m(){switch(ci++,ci%4){case 0:break;case 1:xe.forEach((t=>t.m()));break;case 2:ge.forEach((t=>t.m()));break;case 3:ke.forEach((t=>t.m()))}60>ci||(ci=0),ut.forEach((t=>t.m()))}}),wi=()=>{gi.Se?(gi.start(),At.setAttribute("d","M6 6 6 10M10 6 10 8 10 10"),At.style.transform="rotate(180deg)"):(gi.stop(),At.setAttribute("d","M7 6 7 10M7 6 10 8 7 10"),At.style.transform="rotate(0)")};Dt.addEventListener("click",wi),qt.addEventListener("click",(()=>{Rt.locked?(Rt.locked=!1,Kt()):(It(),Rt.locked=!0)})),jt.addEventListener("click",(()=>{Jt?(Jt=!1,Gt()):(Ht(),Jt=!0)})),document.addEventListener("keypress",(t=>{" "==t.key&&(t.target!=Dt&&wi(),Dt.style.transform="scale(.95)",setTimeout((()=>Dt.style.transform=""),150))})),setTimeout((()=>{gi.start()}),1e3);
